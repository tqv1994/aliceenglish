'use strict';(function(v,l,t,u,q,e,D){function R(a){function b(b){let c="";for(let a in b)c+=b[a];q.body.insertAdjacentHTML("beforeend",c);a&&a()}if(e.Forms.LayoutPart.init)a&&a();else{var c=function(){if(themifyBuilder.debug)return!1;try{let a=localStorage.getItem("tb_visual_templates"),b=themify_vars.version;if(!a)return!1;a=JSON.parse(a);for(let a in themifyBuilder.modules)b+=a;themifyBuilder.cache_data&&(b+=themifyBuilder.cache_data);return a.h!==l.hash(b)?!1:a.val}catch(d){return!1}}();c?b(c):
v.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_visual_templates",tb_load_nonce:themifyBuilder.tb_load_nonce},success(a){if(a){b(a);try{let b=themify_vars.version;for(let a in themifyBuilder.modules)b+=a;themifyBuilder.cache_data&&(b+=themifyBuilder.cache_data);const c={val:a,h:l.hash(b)};localStorage.setItem("tb_visual_templates",JSON.stringify(c))}catch(f){}}}})}}function K(a,b){for(let c=a.length-1;-1<c;--c)if(b===a[c].selectorText.replace(/\s*>\s*/g,">").replace(/,\s/g,
","))return c;return!1}function E(a){if(void 0===L[a]){const b=a;if(-1!==a.indexOf("-")){const b=a.toLowerCase().split("-");a=b[0]+b[1].charAt(0).toUpperCase()+b[1].slice(1);void 0!==b[2]&&(a+=b[2].charAt(0).toUpperCase()+b[2].slice(1));void 0!==b[3]&&(a+=b[3].charAt(0).toUpperCase()+b[3].slice(1))}return L[b]=a}return L[a]}function S(){const a=u.document.getElementsByClassName("tb_middle_bar"),b=e.Utils.getMouseEvents(),c=function(a){if("touchstart"===a.type||1===a.which){a.stopPropagation();let c=
a.clientX,d="tb_right_bar"===this.id?"right":"left",h=tbLocalScript.breakpoints,m=e.toolbar.$el.width(),k=e.iframe.css("transition","none").width(),w=u.document.getElementsByClassName("tb_vertical_change_tooltip")[0],r=u.document.getElementsByClassName("tb_vertical_bars")[0],n=q.createElement("div");n.className="tb_mousemove_cover";w&&w.parentNode.removeChild(w);w=q.createElement("div");w.className="tb_vertical_change_tooltip";this.appendChild(w);r.appendChild(n);r.className+=" tb_resizing_start";
e.iframe[0].classList.add("tb_resizing_start");const l=function(a){a.stopPropagation();a=a.clientX-c;a*=2;"left"===d&&(a=-a);let b=320>k+a?320:k+a;b<=h.mobile?a="mobile":b<=h.tablet[1]?a="tablet":b<=h.tablet_landscape[1]?a="tablet_landscape":(a="desktop",b>m-17&&(b=m));w.textContent=b+"px";e.iframe.css("width",b);e.activeBreakPoint!==a&&ThemifyConstructor.lightboxSwitch(a)};n.addEventListener(b.mouseup,function(a){a.stopPropagation();this.removeEventListener(b.mousemove,l,{passive:!0});this.parentNode.removeChild(this);
w.parentNode.removeChild(w);e.iframe.css("transition","");r.classList.remove("tb_resizing_start");e.iframe[0].classList.remove("tb_resizing_start");q.body.classList.remove("tb_start_animate","tb_start_change_mode");e.Utils._onResize(!0);n=r=w=k=h=d=c=m=null},{once:!0,passive:!0});n.addEventListener(b.mousemove,l,{passive:!0});q.body.classList.add("tb_start_animate","tb_start_change_mode")}};for(let d=a.length-1;-1<d;--d)a[d].addEventListener(b.mousedown,c,{passive:!0})}const G=[],H=[],L={},Q={};e.mode=
"visual";e.iframe="";e.id="";e.is_ajax_call=!1;e.Mixins.Frontend={render_visual(a){const b={},c=l.convert(this.el.querySelectorAll("[data-cid]"));c.unshift(this.el);for(let a=0,f=c.length;a<f;++a){let d=e.Models.Registry.lookup(c[a].getAttribute("data-cid"));d&&(b[d.cid]=d.toJSON())}e.bootstrap(b,a)},change_callback(){const a=this.$el;a[0].insertAdjacentHTML("afterbegin",'<span class="tf_lazy tb_preview_component"></span>');this.render_visual(function(){a.find(".tb_preview_component").remove();e.Utils.setCompactMode(a[0].getElementsByClassName("module_column"));
const b="row"===e.eventName?a.data("cid"):e.beforeEvent.data("cid");e.undoManager.push(b,e.beforeEvent,a,e.eventName);e.Mixins.Builder.update(a)})},createEl(a){var b=this.model.get("elType"),c=q.createElement("div");c.innerHTML=a;c=c.getElementsByClassName("module_"+b)[0];var d=c.classList,f=c.attributes;a="subrow"===b?this.el.getElementsByClassName("module_subrow")[0]:this.el;for(var g="subrow"===b?v(a):this.$el,h=d.length-1;-1<h;--h)a.classList.add(d[h]);for(h=f.length-1;-1<h;--h)d=f[h].name,"class"!==
d&&(a.setAttribute(d,f[h].value),0===d.indexOf("data-")&&g.data(d.replace("data-",""),f[h].value));g=c.getElementsByClassName("builder_row_cover")[0];d=c.getElementsByClassName("tbp_dc_styles")[0];f=c.getElementsByClassName(b+"-slider")[0];const m=c.getElementsByClassName("tb_row_frame");if(void 0!==m[0]&&m[0].parentNode===c){const b=q.createDocumentFragment(),d=a.getElementsByClassName("tb_row_frame");for(h=d.length-1;-1<h;--h)d[h].parentNode.removeChild(d[h]);for(h=m.length-1;-1<h;--h)m[h].parentNode===
c&&b.appendChild(m[h].cloneNode());a.insertBefore(b,a.firstChild)}void 0!==d&&d.parentNode===c&&(h=a.getElementsByClassName("tbp_dc_styles")[0],void 0!==h?a.replaceChild(d,h):a.appendChild(d));void 0!==g&&g.parentNode===c&&(h=a.getElementsByClassName("builder_row_cover")[0],void 0!==h?a.replaceChild(g,h):a.insertAdjacentElement("afterbegin",g));void 0!==f&&f.parentNode===c&&(b=a.getElementsByClassName(b+"-slider")[0],void 0!==b?a.replaceChild(f,b):a.insertAdjacentElement("afterbegin",f))},restoreHtml(a){var b=
q.createElement("div");b.innerHTML=a;a=b.firstChild;e.ActionBar.clear();e.ActionBar.clearClicked();e.ActionBar.clearSelected();for(let b=a.getElementsByClassName("tb_action_wrap"),d=b.length-1;-1<d;--d)for(;null!==b[d].firstChild;)b[d].removeChild(b[d].lastChild);for(let c=l.selectWithParent("[contenteditable]",a),d=c.length-1;-1<d;--d)c[d].setAttribute("contenteditable","false"),(b=c[d].closest(".tb_editor_on"))&&b.classList.remove("tb_editor_on","tb_editor_clicked");for(let b=l.selectWithParent("tb_element_clicked",
a),d=b.length-1;-1<d;--d)b[d].classList.remove("tb_element_clicked");for(let c=l.selectWithParent("[data-cid]",a),d=c.length-1;-1<d;--d)(b=e.Models.Registry.lookup(c[d].getAttribute("data-cid")))&&b.trigger("change:view",c[d]);e.liveStylingInstance.$liveStyledElmt[0].replaceWith(a);e.Mixins.Builder.update(v(a))}};e.previewVisibility=function(){const a=this.el,b=a.classList,c="row"===this.model.get("elType")?this.model.get("styling"):this.model.get("mod_settings");e.isPreview?("hide_all"===c.visibility_all?
b.add("hide-all"):("hide"===c.visibility_desktop&&b.add("hide-desktop"),"hide"===c.visibility_tablet&&b.add("hide-tablet"),"hide"===c.visibility_tablet_landscape&&b.add("hide-tablet_landscape"),"hide"===c.visibility_mobile&&b.add("hide-mobile")),_.isEmpty(c.custom_parallax_scroll_reverse)||(a.dataset.parallaxElementReverse=!0),_.isEmpty(c.custom_parallax_scroll_fade)||(a.dataset.parallaxFade=!0),_.isEmpty(c.custom_parallax_scroll_speed)||(a.dataset.parallaxElementSpeed=parseInt(c.custom_parallax_scroll_speed))):
b.remove("hide-desktop","hide-tablet","hide-tablet_landscape","hide-mobile","hide-all")};Object.assign(e.Views.BaseElement.prototype,e.Mixins.Frontend);e.Views.register_row({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);e.vent.on("dom:preview",e.previewVisibility.bind(this))}});e.Views.register_subrow({initialize(){this.listenTo(this.model,"create:element",
this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});e.Views.register_column({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});e.Views.register_module({_jqueryXhr:!1,templateVisual(a){return wp.template("builder-"+this.model.get("mod_name")+"-content")(a)},initialize(){this.listenTo(this.model,
"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);this.listenTo(this.model,"custom:preview:live",this.previewLive);this.listenTo(this.model,"custom:preview:refresh",this.previewReload);e.vent.on("dom:preview",e.previewVisibility.bind(this))},createEl(a){var b=q.createElement("div");const c=q.createDocumentFragment(),d=q.createElement("div"),f=q.createElement("div"),g=q.createElement("div"),
h=q.createElement("div"),m=this.model.get("mod_name");b.innerHTML=a;a=b.getElementsByClassName("module")[0];b=b.querySelector("#tb_module_styles");if(void 0===a)return e.is_ajax_call||(e.Models.Registry.remove(this.model.cid),this.model.destroy()),!1;if(null!==b){b=JSON.parse(b.innerText);for(let a in b)!l.cssLazy[a]&&b[a].s&&(l.cssLazy[a]=!0,l.LoadCss(b[a].s,b[a].v))}for(;null!==this.el.firstChild;)this.el.firstChild.remove();h.className="tb_visibility_hint";h.appendChild(e.Utils.getIcon("ti-eye"));
e.Utils.visibilityLabel(h,this.model);d.className="tb_data_mod_name";d.innerHTML=themifyBuilder.modules[m].name;f.className="tf_plus_icon tb_column_btn_plus tb_module_btn_plus tb_disable_sorting";g.className="tb_action_wrap tb_module_action";a.classList.add("module-"+m,"tb_"+this.model.get("element_id"));a.appendChild(d);c.appendChild(g);c.appendChild(a);c.appendChild(h);c.appendChild(f);this.el.appendChild(c);"image"===m&&!0===l.is_builder_loaded&&!1===e.id&&setTimeout(function(){e.Utils.calculateHeight()},
500)},shortcodeToHTML(a){const b=[],c=themifyBuilder.available_shortcodes;let d=!1;for(let f=0,g=c.length;f<g;++f)a=wp.shortcode.replace(c[f],a,function(a){a=wp.shortcode.string(a);let c=l.hash(a);void 0===G[c]?(b.push(a),a='<span class="tmp'+c+'">[loading shortcode...]</span>'):a=G[c];d=!0;return a});if(d&&0<b.length){const a=this;void 0!==a._shortcodeXhr&&4!==a._shortcodeXhr&&a._shortcodeXhr.abort();a._shortcodeXhr=v.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element_shortcode",
shortcode_data:JSON.stringify(b),tb_load_nonce:themifyBuilder.tb_load_nonce},success(b){if(b.success){const c=b.data.shortcodes;if(b=b.data.styles)for(let a=0,c=b.length;a<c;++a)l.LoadCss(b[a].s,b[a].v,null,b[a].m);for(let d=0,f=c.length;d<f;++d)b=l.hash(c[d].key),a.$el.find(".tmp"+b).replaceWith(c[d].html),G[b]=c[d].html,l.is_builder_loaded&&e.Utils.loadContentJs(a.$el,"module")}}})}return{content:a,found:d}},previewLive(a,b,c,d,f){e.is_ajax_call=!1;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();
let g=null!==e.activeModel&&d,h,m=300;a.cid=c?c:e.activeModel.cid;if(!g||!0===b){h=this.templateVisual(a);if(e.is_ajax_call)return;!0===b&&(a=this.shortcodeToHTML(h),a.found&&(m=1E3,h=a.content,g=null))}l.trigger("tbDisableInline");if(g){c=d.length;if(void 0===c)d.innerHTML=f;else for(--c;-1<c;--c)d[c].innerHTML=f;e.Utils.calculateHeight()}else if(this.createEl(h),c)e.Utils.calculateHeight();else{e.liveStylingInstance.$liveStyledElmt=this.$el;const a=this;this.timeout&&clearTimeout(this.timeout);
this.timeout=setTimeout(function(){e.Utils.loadContentJs(a.$el,"module");e.Utils.calculateHeight()},m)}},previewReload(a,b,c){function d(a){f.createEl(a);e.liveStylingInstance.$liveStyledElmt=f.$el;e.Utils.loadContentJs(f.$el,"module");f.$el.find(".tb_preview_component").remove();e.Utils.calculateHeight()}console.log(b);if(b&&e.activeModel.cid&&c){a=b.length;if(void 0===a)b.innerHTML=c;else for(let d=0;d<a;++d)b[d].innerHTML=c;e.Utils.calculateHeight()}else{var f=this;this._jqueryXhr&&4!==this._jqueryXhr&&
this._jqueryXhr.abort();e.is_ajax_call=!0;l.trigger("tbDisableInline");b=this.model.get("mod_name");c=a.unsetKey;f.el.insertAdjacentHTML("afterbegin",'<span class="tb_preview_component tf_lazy"></span>');delete a.cid;delete a.unsetKey;delete a.element_id;a=e.Utils.clear(a);a["module_"+b+"_slug"]=1;a=JSON.stringify(a);var g=l.hash(a);if(void 0===H[g]||c)return this._jqueryXhr=v.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_load_module_partial",tb_post_id:themifyBuilder.post_ID,tb_cid:this.model.cid,
element_id:this.model.get("element_id"),tb_module_slug:b,tb_module_data:a,tb_load_nonce:themifyBuilder.tb_load_nonce},success(a){H[g]=a;d(a);e.is_ajax_call=f._jqueryXhr=!1},error(){f.$el.removeClass("tb_preview_loading")}}),this;d(H[g])}}});e.bootstrap=function(a,b,c){const d=[];let f=!0;a||(f=!1,a=e.Models.Registry.items);for(let b in a){a=e.Models.Registry.items[b];let c=a.toJSON(),g=c.elType,k=c["module"===g?"mod_settings":"styling"];if(k&&0<Object.keys(k).length)!0===f&&e.liveStylingInstance.setCss([c],
"module"===g?c.mod_name:g);else if("module"!==g)continue;if("module"===g&&"tile"!==c.mod_name&&void 0===c.mod_settings.__dc__&&"ajax"!==themifyBuilder.modules[c.mod_name].type)a.trigger("custom:preview:live",c.mod_settings,"accordion"===c.mod_name||"box"===c.mod_name||"feature"===c.mod_name||"tab"===c.mod_name||"text"===c.mod_name||"plain-text"===c.mod_name||"pointers"===c.mod_name||"pro-image"===c.mod_name||"countdown"===c.mod_name||"button"===c.mod_name||"pro-slider"===c.mod_name||"timeline"===
c.mod_name,b);else{if("column"===g)delete c.modules;else if("row"===g||"module"===g||"subrow"===g){if("row"===g&&"tb-page-break"===k.custom_css_row)continue;delete c.cols}d.push({jobID:b,data:c})}}this.batch_rendering(d,0,360,b,c)};e.batch_rendering=function(a,b,c,d,f){if(b>=a.length)"function"===typeof d&&d.call(this),e.toolbar.pageBreakModule.countModules(),l.trigger("tb_css_visual_modules_load");else{const g=a.slice(b,b+c);this.render_element(g,f).done(function(){e.batch_rendering(a,b+=c,c,d)})}};
e.render_element=function(a,b){a={action:"tb_render_element",tmpGS:b?JSON.stringify(b):"",batch:JSON.stringify(a),tb_load_nonce:themifyBuilder.tb_load_nonce,tb_post_id:themifyBuilder.post_ID};return v.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:a,success(a){for(let b in a)"tb_module_styles"!==b&&"gs"!==b&&e.Models.Registry.lookup(b).trigger("create:element",a[b]);if(a.tb_module_styles){a=a.tb_module_styles;for(let b in a){let c=a[b].s;!l.cssLazy[b]&&c&&(l.cssLazy[b]=!0,Q[c]=
!0,l.LoadCss(c,a[b].v,null,null,function(){delete Q[c];0===Object.keys(Q).length&&l.trigger("tb_css_visual_modules_load")}))}}else l.trigger("tb_css_visual_modules_load")}})};e.render=function(){R(function(){var a=q.getElementsByClassName("themify_builder_content");const b=themifyBuilder.post_ID;let c=null;for(let d=a.length-1;-1<d;--d)a[d].getAttribute("data-postid")!=b?a[d].classList.add("not_editable_builder"):null===c&&(c=a[d],c.setAttribute("id","themify_builder_content-"+b),c.setAttribute("data-postid",
b),c.classList.remove("not_editable_builder"),c.classList.add("tb_active_builder"));a=t["builderdata_"+b]?t["builderdata_"+b].data:[];a=Array.isArray(a)&&0!==a.length?a.filter(function(a){return a&&0<Object.keys(a).length}):{};t["builderdata_"+b]=null;e.id=b;e.Instances.Builder[e.builderIndex]=new e.Views.Builder({el:c,collection:new e.Collections.Rows(a),type:e.mode});e.Instances.Builder[e.builderIndex].render();a=null;e.bootstrap(null,function(){ThemifyStyles.init(ThemifyConstructor.data,ThemifyConstructor.breakpointsReverse,
b);e.liveStylingInstance=new p;e.liveStylingInstance.setCss(e.Mixins.Builder.toJSON(e.Instances.Builder[0].el));setTimeout(S,2E3);l.on("tb_css_visual_modules_load",function(){const a=u.document.getElementById("tf_svg"),b=q.getElementById("tf_svg");a.parentNode.replaceChild(b,a);e.toolbar.el.style.display="block";u.jQuery("body").trigger("themify_builder_ready");e.Utils.loadContentJs();e.Instances.Builder[e.builderIndex].$el.triggerHandler("tb_init");l.is_builder_loaded=!0;e.id=!1;setTimeout(function(){e.EdgeDrag.init()},
500)},!0)})})};l.body.one("builderiframeloaded.themify",function(a,b){l.w=t.innerWidth;l.h=t.innerHeight;e.iframe=v(b);setTimeout(function(){l.loadAnimateCss()},1);D.setToolbar();e.toolbar=new e.Views.Toolbar({el:"#tb_toolbar"});e.toolbar.render();e.GS.init();l.LoadAsync(tbLocalScript.builder_url+"/js/editor/themify-constructor.js",function(){t.wp.media=t.top.wp.media;t.MediaElementPlayer=t.top.MediaElementPlayer;jQuery.fn.mediaelementplayer=t.top.jQuery(t.top.document).mediaelementplayer;t.wp.mediaelement=
t.top.wp.mediaelement;t.tinyMCE=t.top.tinyMCE;t.tinyMCEPreInit=t.top.tinyMCEPreInit;t.tinymce=t.top.tinymce;t.switchEditors=t.top.switchEditors;t.wpApiSettings=t.top.wpApiSettings;ThemifyConstructor.getForms(e.render)},null,null,function(){return"undefined"!==typeof ThemifyConstructor});q.addEventListener("submit",function(a){a.preventDefault()});q.addEventListener("click",function(a){var b=a.target;b="A"===b.tagName?b:b.closest("a");!b||"_blank"===b.target||"#"!==b.href&&b.href&&b.href.replace((new URL(b.href)).hash,
"")===t.top.location.href.replace(location.hash,"")||a.preventDefault()})});const p=function(){this.$context=v("#tb_lightbox_parent",u.document);this.$liveStyledElmt=null;this.module_rules={};this.rulesCache={};this.currentStyleObj={}};p.prototype.init=function(a,b){let c;var d=e.activeModel.get("element_id");this.type=e.activeModel.get("elType");this.group="module"===this.type?e.activeModel.get("mod_name"):this.type;!0===b&&null!==e.GS.previousModel?(d=e.Models.Registry.lookup(e.GS.previousModel),
c=d.get("elType"),"module"===c&&(c=d.get("mod_name")),d=d.get("element_id")):c=this.group;this.prefix=ThemifyStyles.getBaseSelector(c,d);this.$liveStyledElmt=b?v(q.querySelector(this.prefix)):e.Instances.Builder[e.builderIndex].$el.find(".tb_element_cid_"+e.activeModel.cid).first();this.currentStyleObj={};this.tempData={};this.undoData={};this.undoData[e.activeBreakPoint]={};this.tempData[e.activeBreakPoint]={};void 0===this.rulesCache[e.activeBreakPoint]&&(this.rulesCache[e.activeBreakPoint]={});
this.currentSheet=this.getSheet(e.activeBreakPoint,b);!0!==a&&("column"!==this.type&&"subrow"!==this.type&&this.bindAnimation(),this.bindTabsSwitch(),this.initModChange())};p.prototype.setCss=function(a,b,c){a=e.GS.createCss(a,b,void 0);b=[];for(let g in a)if("fonts"===g||"cf_fonts"===g)for(let c in a[g]){var d=c;0<a[g][c].length&&(d+=":"+a[g][c].join(","));b.push(d)}else if("gs"===g){d=a[g];for(let a in d){var f=this.getSheet(a,!0);let b=f.cssRules?f.cssRules:f.rules;for(let c in d[a])!1===K(b,c)&&
f.insertRule(c+"{"+d[a][c].join("")+";}",b.length)}}else if("bg"!==g){d=this.getSheet(g,c);f=d.cssRules?d.cssRules:d.rules;for(let b in a[g])!1===K(f,b)&&d.insertRule(b+"{"+a[g][b].join("")+";}",f.length)}ThemifyConstructor.font_select.loadGoogleFonts(b.join("|"));return a};p.prototype.setLiveStyle=function(a,b,c){c?"string"===typeof c&&(c=[c]):c=[""];c=ThemifyStyles.getNestedSelector(c);let d="";const f=this.currentSheet.cssRules?this.currentSheet.cssRules:this.currentSheet.rules;for(let a=0,b=c.length;a<
b;++a){var g="h"===this.styleTabId?c[a].endsWith(":after")||c[a].endsWith(":before"):!0;!1===g&&-1===c[a].indexOf(":hover")&&(c[a]+=":hover");d+=this.prefix+c[a];!1===g&&(d+=","+this.prefix+c[a].replace(":hover",".tb_visual_hover"));a!==b-1&&(d+=",")}if(!0===this.isChanged)if("h"===this.styleTabId){g=d.split(",");for(var h=g.length-1;-1<h;--h)if(-1===g[h].indexOf("tb_visual_hover")){c=q.querySelectorAll(g[h].split(":hover")[0]);for(var m=c.length-1;-1<m;--m)c[m].classList.add("tb_visual_hover")}}else for(this.$liveStyledElmt[0].classList.remove("tb_visual_hover"),
c=this.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover"),g=c.length-1;-1<g;--g)c[g].classList.remove("tb_visual_hover");d=d.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">").replace(/,\s/g,",");c=l.hash(d);g=b;h=a;m=void 0!==this.rulesCache[e.activeBreakPoint][c]?this.rulesCache[e.activeBreakPoint][c]:K(f,d);!1===b&&(b="");a=E(a);!1!==m&&f[m]?(void 0===this.tempData[e.activeBreakPoint][m]&&(this.tempData[e.activeBreakPoint][m]={}),void 0===this.tempData[e.activeBreakPoint][m][a]&&(this.tempData[e.activeBreakPoint][m][a]=
f[m].style[a]),f[m].style[a]=b):(m=f.length,this.currentSheet.insertRule(d+"{"+h+":"+b+";}",m),void 0===this.tempData[e.activeBreakPoint][m]&&(this.tempData[e.activeBreakPoint][m]={}),this.tempData[e.activeBreakPoint][m][a]="");this.rulesCache[e.activeBreakPoint][c]=m;void 0===this.undoData[e.activeBreakPoint][m]&&(this.undoData[e.activeBreakPoint][m]={});this.undoData[e.activeBreakPoint][m][a]={a:b,b:this.tempData[e.activeBreakPoint][m][a]};l.body.triggerHandler("tb_"+this.type+"_styling",[this.group,
a,b,g,this.$liveStyledElmt]);"desktop"===e.activeBreakPoint||0!==a.indexOf("padding")&&0!==a.indexOf("margin")&&"height"!==a&&"width"!==a||e.Utils.calculateHeight()};p.prototype.initModChange=function(a){if(!0===a)l.body.off("themify_builder_change_mode.tb_visual_mode");else{var b=this;l.body.on("themify_builder_change_mode.tb_visual_mode",function(a,d,f){b.setMode(f,null!==e.GS.activeGS)})}};p.prototype.setMode=function(a,b){void 0===this.tempData[a]&&(this.tempData[a]={});void 0===this.rulesCache[a]&&
(this.rulesCache[a]={});void 0===this.undoData[a]&&(this.undoData[a]={});this.currentSheet=this.getSheet(a,b)};p.prototype.revertRules=function(a){for(let c in this.tempData){var b=this.getSheet(c,a);b=b.cssRules?b.cssRules:b.rules;for(let a in this.tempData[c])if(b[a])for(let d in this.tempData[c][a])b[a].style[d]=this.tempData[c][a][d]}this.undoData={};this.tempData={}};p.prototype.getSheet=function(a,b){return ThemifyStyles.getSheet(a,b)};p.prototype.reset=function(){this.rulesCache={};this.tempData=
{};this.undoData={};const a=ThemifyConstructor.breakpointsReverse;for(let c=a.length-1;-1<c;--c){let d=this.getSheet(a[c]);var b=d.cssRules;for(b=b.length-1;-1<b;--b)d.deleteRule(b);d=this.getSheet(a[c],!0);b=d.cssRules;for(b=b.length-1;-1<b;--b)d.deleteRule(b)}};p.prototype.clear=function(){var a=this.$liveStyledElmt[0];void 0!==a&&a.classList.remove("animated","hover-wow","tb_visual_hover");this.module_rules={};this.styleTab=this.styleTabId=this.currentField=this.isChanged=null;if(!e.saving&&e.hasChanged)this.revertRules(null!==
e.GS.activeGS),this.type&&"module"!==this.type&&null===e.GS.activeGS&&(a=e.activeModel.get("styling"))&&"slider"===a.background_type&&a.background_slider&&this.bindBackgroundSlider();else{a=a.getElementsByClassName("tb_visual_hover");for(let b=a.length-1;-1<b;--b)a[b].classList.remove("tb_visual_hover")}this.bindAnimation(!0);this.bindTabsSwitch(!0);this.initModChange(!0);this.undoData={};this.tempData={};this.$liveStyledElmt=this.currentStyleObj=this.currentSheet=null};p.prototype.addOrRemoveFrame=
function(a,b){if("module"!==this.type){var c=this,d=this.$liveStyledElmt,f="string"===typeof a;a=f?a:a.closest(".tb_tab").id.split("_").pop();var g=d.children(".tb_row_frame_"+a);if(void 0===b){b={};var h=this.getValue(a+"-frame_type").selector;const c="custom location width height width_unit height_unit repeat type layout color".split(" ");for(let d=0,f=c.length;d<f;++d){var m=u.document.getElementById(a+"-frame_"+c[d]);if("type"===c[d])m=m.querySelector("input:checked").value;else if("layout"===
c[d])m=m.getElementsByClassName("selected")[0].id;else if("color"===c[d]){if(m=e.Utils.getColor(m),""===m)continue}else m=m.value;b[c[d]]=m}}if(b.type===a+"-presets"||b.type===a+"-custom"){if(b.type===a+"-presets"&&(!b.layout||"none"===b.layout)||b.type===a+"-custom"&&!b.custom){"desktop"===e.activeBreakPoint?f||this.setLiveStyle("background-image","",h):"none"===b.layout&&this.setLiveStyle("background-image","none",h);return}0===g.length?(g=q.createElement("div"),g.className="tf_abs tb_row_frame tb_row_frame_"+
a,void 0!==b.location&&(g.className+=" "+b.location),d.children(".tb_action_wrap").after(g)):(g.removeClass("behind_content in_front"),void 0!==b.location&&g.addClass(b.location))}if(!f){if(b.type===a+"-presets"){d="left"===a||"right"===a?b.layout+"-l":b.layout;const g=l.hash(d),e=function(a){b.color&&(a=a.replace(/#D3D3D3/ig,b.color));c.setLiveStyle("background-image",'url("data:image/svg+xml;utf8,'+encodeURIComponent(a)+'")',h)};void 0!==ThemifyStyles.fields.frameCache[g]?e(ThemifyStyles.fields.frameCache[g]):
(f=q.getElementById("tmpl-frame_"+d),null!==f?(ThemifyStyles.fields.frameCache[g]=f.textContent.trim(),e(ThemifyStyles.fields.frameCache[g])):v.ajax({dataType:"text",url:tbLocalScript.builder_url+"/img/row-frame/"+d+".svg",success(a){ThemifyStyles.fields.frameCache[g]=a;e(a)}}))}else c.setLiveStyle("background-image",'url("'+b.custom+'")',h);c.setLiveStyle("width",b.width?b.width+b.width_unit:"",h);c.setLiveStyle("height",b.height?b.height+b.height_unit:"",h);b.repeat?"left"===a||"right"===a?c.setLiveStyle("background-size",
"100% "+100/b.repeat+"%",h):c.setLiveStyle("background-size",100/b.repeat+"% 100%",h):c.setLiveStyle("background-size","",h)}}};p.prototype.overlayType=function(a){if("module"!==this.type){var b="color"===a||"hover_color"===a,c=b?"tfminicolors-input":"themify-gradient-type";a=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0].getElementsByClassName(c)[0];b?((b=a.value)&&(b=e.Utils.getColor(a)),l.triggerEvent(a,"themify_builder_color_picker_change",{val:b})):l.triggerEvent(a,"change")}};
p.prototype.addOrRemoveComponentOverlay=function(a,b,c){if("module"!==this.type){var d=this.getComponentBgOverlay(this.type),f=this.getValue(b),g=f.selector;d=0!==d.length;this.$liveStyledElmt[0].classList.toggle("tb_visual_hover","h"===this.styleTabId);""===c&&b?(this.setLiveStyle("backgroundImage","",g),this.setLiveStyle("backgroundColor","",g)):(d||(d=q.createElement("div"),d.className="tf_abs builder_row_cover",this.$liveStyledElmt.find(".tb_action_wrap").first().before(d)),f&&("color"===a?this.setLiveStyle("backgroundImage",
"none",g):this.setLiveStyle("backgroundColor",!1,g),this.setLiveStyle(f.prop,c,g)))}};p.prototype.bindMultiFields=function(a,b){function c(a,b){if(!1===m&&!1===h){if("row"===d.type&&void 0===tbLocalScript.fullwidth_support&&(k&&("padding"===b||"margin"===b)||"padding-left"===b||"padding-right"===b||"margin-left"===b||"margin-right"===b)){const c=b.split("-"),f=e.activeBreakPoint+"-"+c[0];if(k)a=a+","+a;else{let b=d.$liveStyledElmt.data(f);b=b?b.split(","):[];"left"===c[1]?b[0]=a:b[1]=a;a=b.join(",")}d.$liveStyledElmt.attr("data-"+
f,a).data(f,a);ThemifyBuilderModuleJs.setupFullwidthRows(d.$liveStyledElmt)}(k&&"padding"===b||0===b.indexOf("padding"))&&setTimeout(function(){l.trigger("tfsmartresize")},600)}}const d=this;if(b=d.getValue(a.id)){var f=a.closest(".tb_seperate_items"),g=b.prop.split("-"),h=void 0!==g[3],m=!1===h&&"border"===g[0],k=f.hasAttribute("data-checked");f=f.getElementsByClassName("tb_multi_field");var w=function(a){let b="";if(!0===m){var c=a.closest("li");a=parseFloat(c.getElementsByClassName("border_width")[0].value.trim());
const d=c.getElementsByClassName("border_style")[0].value;c=e.Utils.getColor(c.getElementsByClassName("tfminicolors-input")[0]);"none"===d?b=d:isNaN(a)||""===a||""===c||(b=a+"px "+d+" "+c)}else b=a.value.trim(),""!==b&&(b=parseFloat(b),b=isNaN(b)?"":b+a.closest(".tb_input").querySelector("#"+a.id+"_unit").value);return b};a=!0===k?w(a):null;g=g[0];for(let e=f.length-1;-1<e;--e)!1===k&&(a=w(f[e])),g=d.getValue(f[e].id).prop,d.setLiveStyle(g,a,b.selector),c(a,g);!1===m&&(e.ActionBar.hoverCid=null);
f=null}};p.prototype.bindRowWidthHeight=function(a,b,c){c||(c=this.$liveStyledElmt);"row_height"===a?"fullheight"===b?c[0].classList.add(b):c[0].classList.remove("fullheight"):"fullwidth"===b?(c.removeClass("fullwidth").addClass("fullwidth_row_container"),ThemifyBuilderModuleJs.setupFullwidthRows(c)):"fullwidth-content"===b?(c.removeClass("fullwidth_row_container").addClass("fullwidth"),ThemifyBuilderModuleJs.setupFullwidthRows(c)):c.removeClass("fullwidth fullwidth_row_container").css({"margin-left":"",
"margin-right":"","padding-left":"","padding-right":"",width:""});l.trigger("tfsmartresize")};p.prototype.bindAnimation=function(a){const b=this;if(!0===a)this.$context.off("change.tb_animation");else this.$context.on("change.tb_animation","#animation_effect,#animation_effect_delay,#animation_effect_repeat,#hover_animation_effect",function(){var a="hover_animation_effect"===this.id,d=a?"hover_animation_effect":"animation_effect";const f=a?this.value:b.$context.find("#animation_effect").val();var g=
void 0!==b.currentStyleObj[d]?b.currentStyleObj[d]:ThemifyConstructor.values[d];const e=b.$liveStyledElmt;g&&e.removeClass(g+" wow").css({"animation-name":"","animation-delay":"","animation-iteration-count":""});e.removeClass("animated tb_hover_animate");if(b.currentStyleObj[d]=f)d=a?"":parseFloat(b.$context.find("#animation_effect_delay").val()),a=a?"":parseInt(b.$context.find("#animation_effect_repeat").val()),g=tbLocalScript.is_animation,e.css({"animation-delay":0<d&&!isNaN(d)?d+"s":"","animation-iteration-count":0<
a&&!isNaN(a)?a:""}).addClass("wow").attr("data-tf-animation",f),tbLocalScript.is_animation=!0,ThemifyBuilderModuleJs.wowInit(e,null,!1),tbLocalScript.is_animation=g})};p.prototype.getRowAnchorClass=function(a){return 0<a.length?"tb_has_section tb_section-"+a:""};p.prototype.getStylingVal=function(a){return void 0!==this.currentStyleObj[a]?this.currentStyleObj[a]:""};p.prototype.setStylingVal=function(a,b){this.currentStyleObj[a]=b};p.prototype.bindBackgroundMode=function(a,b){const c={repeat:"repeat",
"repeat-x":"repeat-x","repeat-y":"repeat-y","repeat-none":"no-repeat","no-repeat":"no-repeat",fullcover:"cover","best-fit-image":"contain","builder-parallax-scrolling":"cover","builder-zoom-scrolling":"100%","builder-zooming":"100%"},d=this.$liveStyledElmt[0];if(void 0!==c[a]){let f={};b=this.getValue(b);let e=u.document.getElementById(b.origId);null!==e&&""===e.value.trim()?(a=null,f={"background-repeat":"","background-size":"","background-position":"","background-attachment":""}):-1!==a.indexOf("repeat")?
(f["background-repeat"]=c[a],f["background-size"]="auto"):(f["background-size"]=c[a],f["background-repeat"]="no-repeat","best-fit-image"===c[a]||"builder-zooming"===c[a]?f["background-position"]="center center":"builder-zoom-scrolling"===c[a]&&(f["background-position"]="50%"));d.classList.remove("builder-parallax-scrolling","builder-zooming","builder-zoom-scrolling");d.style.backgroundSize=d.style.backgroundPosition="";if("module"!==this.type||"builder-parallax-scrolling"!==a&&"builder-zooming"!==
a&&"builder-zoom-scrolling"!==a&&"best-fit-image"!==a){"builder-parallax-scrolling"===a?d.classList.add("builder-parallax-scrolling"):"builder-zooming"===a?d.classList.add("builder-zooming"):"builder-zoom-scrolling"===a&&d.classList.add("builder-zoom-scrolling");for(let a in f)this.setLiveStyle(a,f[a],b.selector);"builder-zoom-scrolling"===a?ThemifyBuilderModuleJs.backgroundZoom(this.$liveStyledElmt):"builder-zooming"===a?ThemifyBuilderModuleJs.backgroundZooming(this.$liveStyledElmt):"builder-parallax-scrolling"===
a&&ThemifyBuilderModuleJs.backgroundScrolling(this.$liveStyledElmt)}}};p.prototype.position=function(a,b){a&&0<a.length&&(b=this.getValue(b))&&(a=a.split(","),this.setLiveStyle(b.prop,a[0]+"% "+a[1]+"%",b.selector))};p.prototype.bindBackgroundSlider=function(a){if("module"!==this.type){var b=this;a=b.$context.find("#"+a.id).val().trim();b.removeBgSlider();if(a){void 0===this.cahce&&(this.cahce={});a={shortcode:encodeURIComponent(a),mode:b.$context.find("#background_slider_mode").val(),speed:b.$context.find("#background_slider_speed").val(),
size:b.$context.find("#background_slider_size").val()};const c=function(a){a=v(a);const c=b.getComponentBgOverlay(this.type);0<c.length?c.after(a):b.$liveStyledElmt.prepend(a);ThemifyBuilderModuleJs.backgroundSlider(a[0].parentNode)};let d="";for(let b in a)d+=l.hash(b+a[b]);void 0!==this.cahce[d]?c(this.cahce[d]):(a.type=b.type,v.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:"tb_slider_live_styling",tb_background_slider_data:a},function(a){10>a.length||(b.cahce[d]=a,c(a))}))}}};
p.prototype.videoOptions=function(a,b){if("module"!==this.type){var c=this.$liveStyledElmt.find(".big-video-wrap").first();a=!0===a.checked;var d="";void 0!==c[0]&&(c[0].classList.contains("themify_ytb_wrapper")?(c=this.$liveStyledElmt,d="ytb"):c[0].classList.contains("themify-video-vmieo")?(c=$f(c.children("iframe")[0]))&&(d="vimeo"):(c=this.$liveStyledElmt.data("plugin_ThemifyBgVideo"),d="local"),"mute"===b?a?("ytb"===d?c.ThemifyYTBMute():"vimeo"===d?c.api("setVolume",0):"local"===d&&c.muted(!0),
this.$liveStyledElmt.data("mutevideo","mute")):("ytb"===d?c.ThemifyYTBUnmute():"vimeo"===d?c.api("setVolume",1):"local"===d&&c.muted(!1),this.$liveStyledElmt.data("mutevideo","")):"unloop"===b&&(a?("vimeo"===d?c.api("setLoop",0):"local"===d&&c.loop(!1),this.$liveStyledElmt.data("unloopvideo","")):("vimeo"===d?c.api("setLoop",1):"local"===d&&c.loop(!0),this.$liveStyledElmt.data("unloopvideo","loop"))))}};p.prototype.bindBackgroundTypeRadio=function(a){let b="tb_uploader_input";"module"!==this.type&&
("slider"!==a?"n"===this.styleTabId&&this.removeBgSlider():b="tb_shortcode_input","video"!==a&&"n"===this.styleTabId&&this.removeBgVideo());"gradient"!==a?this.setLiveStyle("backgroundImage","none"):b="themify-gradient-type";const c=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0];l.triggerEvent(c.getElementsByClassName(b)[0],"change");"image"===a&&"module"===this.type&&(b=c.getElementsByClassName("tfminicolors-input")[0])&&l.triggerEvent(b,"themify_builder_color_picker_change",{val:b.value})};
p.prototype.bindFontColorType=function(a,b,c){if("radio"===c)if(b=-1!==a.indexOf("_solid"),a=!0===b?a.replace(/_solid$/ig,""):a.replace(/_gradient$/ig,"-gradient-type"),a=u.document.getElementById(a),!0===b){b=e.Utils.getColor(a);if(void 0===b||""===b)b="";l.triggerEvent(a,"themify_builder_color_picker_change",{val:b})}else l.triggerEvent(a,"change");else b=this.getValue(b).selector,"color"===c?void 0===a||""===a?(a="",this.setLiveStyle("WebkitBackgroundClip","",b),this.setLiveStyle("backgroundClip",
"",b),this.setLiveStyle("backgroundImage","",b)):(this.setLiveStyle("WebkitBackgroundClip","border-box",b),this.setLiveStyle("backgroundClip","border-box",b),this.setLiveStyle("backgroundImage","none",b)):""!==a&&(c="backgroundImage",this.setLiveStyle("color","transparent",b),this.setLiveStyle("WebkitBackgroundClip","text",b),this.setLiveStyle("backgroundClip","text",b)),""===a&&"color"!==c||this.setLiveStyle(c,a,b)};p.prototype.shadow=function(a,b,c){if(b=this.getValue(b)){a=a.closest(".tb_seperate_items").getElementsByClassName("tb_shadow_field");
c="";let d=!0,f="";for(let b=0,h=a.length;b<h;++b)if(a[b].classList.contains("tb-checkbox"))c=a[b].checked?"inset ":"";else{let c=a[b].value.trim();"color"===ThemifyConstructor.styles[a[b].id].type?c=e.Utils.getColor(a[b]):""===c?c=0:(d=!1,c+=a[b].closest(".tb_input").querySelector("#"+a[b].id+"_unit").value);f+=c+" "}f=!0===d?"":c+f;this.setLiveStyle(b.prop,f,b.selector)}};p.prototype.filters=function(a,b){a=a.closest(".tb_filters_fields").getElementsByClassName("tb_filters_field");let c="",d;for(let b=
0,e=a.length;b<e;++b){let e=a[b].value.trim();""!==e&&(d=this.getValue(a[b].id),e+="hue-rotate"===d.prop?"deg":a[b].closest(".tb_seperate_items").querySelector("#"+a[b].id+"_unit").textContent,e=d.prop+"("+e+")",c+=e+" ")}d=this.getValue(b);this.setLiveStyle("filter",c,d.selector)};p.prototype.transform=function(a,b){let c="";a=a.closest(".tb_transform_fields");const d=this.getValue(b),e=["scale","translate","rotate","skew"];b=b.split("_")[0];for(let d=0,f=e.length;d<f;++d)switch(e[d]){case "scale":case "translate":case "skew":var g=
a.querySelector("#"+b+"_"+e[d]+"_top").value.trim();const f=a.querySelector("#"+b+"_"+e[d]+"_bottom").value.trim();var h="translate"===e[d]?{x:a.querySelector("#"+b+"_"+e[d]+"_top_unit").value,y:a.querySelector("#"+b+"_"+e[d]+"_bottom_unit").value}:"skew"===e[d]?"deg":"";if(""!==g||""!==f)c=""!==g&&a.querySelector("#"+b+"_"+e[d]+"_opp_bottom .style_apply_oppositive").checked?c+(e[d]+"("+g+("translate"===e[d]?h.x:h)+") "):""!==g&&""!==f?c+(e[d]+"("+g+("translate"===e[d]?h.x:h)+","+f+("translate"===
e[d]?h.y:h)+") "):c+(""!==g?e[d]+"X("+g+("translate"===e[d]?h.x:h)+") ":e[d]+"Y("+f+("translate"===e[d]?h.y:h)+") ");break;case "rotate":h=["x","y","z"];for(let f in h)h.hasOwnProperty(f)&&(g=a.querySelector("#"+b+"_"+e[d]+"_"+h[f]).value.trim(),""!==g&&(c+=e[d]+h[f].toUpperCase()+"("+g+"deg) "))}this.setLiveStyle("transform",c.trim(),d.selector)};p.prototype.setData=function(a,b,c){if(a=this.getValue(a))""===b&&(b=a.prop),this.setLiveStyle(b,c,a.selector)};p.prototype.bindEvents=function(a,b){if(!a.classList.contains("style_apply_all")){var c=
this;(function(){let d,f=b.type,g=b.prop,h=b.id;d="color"===f?"themify_builder_color_picker_change":"gradient"===f?"themify_builder_gradient_change":"text"===f||"range"===f?"keyup":"change";a.addEventListener(d,function(a){var k=this.classList,m="SELECT"===this.tagName,r=!m&&"radio"===this.type;if(c.currentField!==this.id||""===c.currentField){c.currentField="radio"===this.type?!1:this.id;c.isChanged=!0;c.styleTab=null;c.styleTabId="n";var n=this.closest(".tb_tab");null===n?(n=this.closest(".tb_expanded_opttions"),
null===n&&(n=u.document.getElementById("tb_options_styling"))):c.styleTabId=n.id.split("_").pop();c.styleTab=n}else c.isChanged=!1;e.hasChanged=!0;a=a.detail&&a.detail.val?a.detail.val:"frame"===f?this.id:this.value;a=void 0!==a&&"undefined"!==a?a.trim():"";if(k.contains("tb_transform_field"))c.transform(this,h);else if("color"===f&&k.contains("border_color")||!0===m&&k.contains("border_style")||"keyup"===d&&(k.contains("border_width")||k.contains("tb_multi_field")))c.bindMultiFields(this);else if("frame-custom"===
g||"frame"===f||k.contains("tb_frame"))"module"!==c.type&&c.addOrRemoveFrame(this);else if(k.contains("tb_shadow_field"))c.shadow(this,h);else if(k.contains("tb_filters_field"))c.filters(this,h);else if("keyup"===d)""!==a&&("column-rule-width"===g?(a+="px",k=h.replace("_width","_style"),m=u.document.getElementById(k),null!==m&&c.setData(k,"",m.value)):"column-gap"===g?a+="px":(k=u.document.getElementById(h+"_unit"),null!==k&&(a+=k.value?k.value:"px"))),c.setData(h,"",a);else if(!0===b.isFontColor)c.bindFontColorType(a,
h,f);else{if(!0===m)if("font-weight"===g)k=this.getAttribute("data-selected"),m=c.styleTab.getElementsByClassName("tb_multi_fonts")[0],null!==k&&""!==k&&"default"!==k&&void 0===ThemifyConstructor.font_select.safe[k]&&ThemifyConstructor.font_select.loadGoogleFonts(k+":"+a),-1!==a.indexOf("italic")?(a=parseInt(a.replace("italic","")),k=m.querySelector('[value="italic"]')):k=m.querySelector('[value="normal"]'),!1===k.checked&&k.parentNode.click();else if("font_select"===f)""!==a&&"default"!==a&&void 0===
ThemifyConstructor.font_select.safe[a]?(k=this.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],m=a,void 0!==k?m+=":"+k.value:c.setLiveStyle("font-weight","",b.selector),ThemifyConstructor.font_select.loadGoogleFonts(m)):"default"===a&&(a=""),""!==a&&(a=ThemifyStyles.parseFontName(a));else{if(k.contains("tb_unit")){l.triggerEvent(c.$context.find("#"+h.replace("_unit",""))[0],"keyup");return}if("background-mode"===g){c.bindBackgroundMode(a,h);return}if("column-count"===g&&0==a)a=
"";else if(k.contains("tb_position_field"))for(k=["top","right","bottom","left"],m=this.closest(".tb_input"),r=k.length-1;-1<r;--r){n="";if("absolute"===a||"fixed"===a){let a="#"+b.id+"_"+k[r];n="auto";m.querySelector(a+"_auto input").checked||(n=m.querySelector(a).value.trim()+m.querySelector(a+"_unit").value.trim())}c.setLiveStyle(k[r],n,b.selector)}else if("display"===g){if("none"===a)return!1;"inline-block"===a?c.setLiveStyle("width","auto",b.selector):c.setLiveStyle("width","100%",b.selector)}else"vertical-align"===
g&&""!==a&&c.setLiveStyle("align-self","top"===a?"flex-start":"middle"===a?"center":"flex-end",b.selector)}else{if("gallery"===f&&"module"!==c.type){c.bindBackgroundSlider(b);return}if(!0===r){h=this.closest(".tb_lb_option").id;!1===this.checked&&(a="");if("imageGradient"===f||!0===b.is_background){c.bindBackgroundTypeRadio(a);return}if(!0===b.is_overlay){"module"!==c.type&&c.overlayType(a);return}}else if("color"===f||"gradient"===f){"gradient"===f&&(h=this.dataset.id);if(!0===b.is_overlay){"module"!==
c.type&&c.addOrRemoveComponentOverlay(f,h,a);return}"color"===f&&(k=null,"module"===c.type&&void 0!==b.colorId&&void 0!==b.origId?(k=u.document.getElementById(b.origId),null!==k&&"image"!==k.closest(".tb_input").querySelector("input:checked").value&&(k=null)):"module"!==c.type&&"h"===c.styleTabId&&(k=c.styleTab.getElementsByClassName("tb_uploader_input")[0]),k&&""===k.value.trim()&&c.setLiveStyle("background-image",""!==a?"none":"",b.selector))}else if("image"===f||"video"===f){if("video"===f)return 0<
a.length?"module"!==c.type&&(c.$liveStyledElmt.data("fullwidthvideo",a).attr("data-fullwidthvideo",a),_.isEmpty(c.$liveStyledElmt.data("mutevideo"))&&c.$context.find("#background_video_options_mute").is(":checked")&&c.$liveStyledElmt.data("mutevideo","mute"),ThemifyBuilderModuleJs.fullwidthVideo(c.$liveStyledElmt)):c.removeBgVideo(),!1;a?a="url("+a+")":(a="",void 0!==b.colorId&&"h"===c.styleTabId&&(k=u.document.getElementById(b.colorId),null!==k&&""!==k.value.trim()&&(a="none")));k=c.styleTab.getElementsByClassName("tb_image_options");
for(m=k.length-1;-1<m;--m)for(r=k[m].getElementsByClassName("tb_lb_option"),n=r.length-1;-1<n;--n)l.triggerEvent(r[n],"change")}else{if("position_box"===f){c.position(a,h);return}if("checkbox"===f){if(null!==this.closest("#background_video_options")){c.videoOptions(this,a);return}if("height"===g&&-1!==h.indexOf("_auto_height")||"width"===g&&-1!==h.indexOf("_auto_width")){a="height"===g?b.heightID:b.widthID;this.checked?c.setData(a,g,"auto"):(k=c.styleTab.querySelector("#"+a).value.trim(),""!==k?c.setData(a,
g,k+v(c.styleTab).find("#"+a+"_unit").val()):c.setData(a,g,""));return}if(!0===b.is_position){k="#"+b.posId;m=this.closest(".tb_input");this.checked?a="auto":(a=m.querySelector(k).value.trim(),a=""===a||isNaN(a)?"":a+m.querySelector(k+"_unit").value);c.setLiveStyle(b.prop,a,b.selector);return}if("background-image"===g){this.checked||(a=!1);c.setLiveStyle(b.prop,a,b.selector);return}}}}c.setData(h,"",a)}},{passive:!0})})()}};p.prototype.getValue=function(a){return void 0!==this.module_rules[a]?this.module_rules[a]:
!1};p.prototype.bindTabsSwitch=function(a){const b=this;if(!0===a)l.body.off("themify_builder_tabsactive.hoverTabs");else l.body.on("themify_builder_tabsactive.hoverTabs",function(a,d,e){if("styling"===ThemifyConstructor.clicked){let c;if("h"!==d.split("_").pop())for(b.$liveStyledElmt[0].classList.remove("tb_visual_hover"),c=b.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover"),a=c.length-1;-1<a;--a)c[a].classList.remove("tb_visual_hover");else"module"!==b.type&&(a=e.previousElementSibling.getElementsByClassName("background_type")[0])&&
(a=a.querySelector("input:checked").value,"image"===a||"gradient"===a?e.classList.remove("tb_disable_hover"):e.classList.add("tb_disable_hover")),setTimeout(function(){c=e.getElementsByClassName("tb_lb_option");let a=[];for(var d=c.length-1;-1<d;--d){var f=c[d].id,g=c[d].classList.contains("themify-gradient");!0===g&&(f=c[d].dataset.id);if(void 0!==b.module_rules[f]&&(g||null!==c[d].offsetParent))for(void 0!==b.module_rules[f].is_overlay&&b.$liveStyledElmt[0].classList.add("tb_visual_hover"),f=Array.isArray(b.module_rules[f].selector)?
b.module_rules[f].selector:[b.module_rules[f].selector],g=f.length-1;-1<g;--g){let b=f[g].split(":hover")[0];a[b]=1}}a=Object.keys(a);if(0<a.length)for(d=a.length-1;-1<d;--d)for(c=q.querySelectorAll(b.prefix+a[d]),f=c.length-1;-1<f;--f)c[f].classList.add("tb_visual_hover")},10)}})};p.prototype.getComponentBgOverlay=function(a){a||(a=this.type);return this.$liveStyledElmt.find("subrow"===a?"> .module_subrow > .builder_row_cover":"> .builder_row_cover")};p.prototype.getComponentBgSlider=function(){const a=
"colum"===this.type&&"sub-column"===e.activeModel.get("component_name")?"sub-col":"colum"===this.type?"col":this.type;return this.$liveStyledElmt.children("."+a+"-slider")};p.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children(".tb_backstretch")).remove();this.$liveStyledElmt.css({position:"",background:"","z-index":""})};p.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr("data-fullwidthvideo").data("fullwidthvideo","").children(".big-video-wrap").remove()};
e.EdgeDrag={undoData:{},_onDrag:null,init(){const a=e.Utils.getMouseEvents();null===this._onDrag&&(this._onDrag=e.EdgeDrag.drag.bind(this));localStorage.getItem("tb_disable_padding_dragging")?(l.body[0].classList.add("tb_disable_padding_dragging"),e.Instances.Builder[e.builderIndex].el.removeEventListener(a.mousedown,this._onDrag,{passive:!0}),e.toolbar.el.getElementsByClassName("tb_padding_dragging_mode")[0].checked=!1):(e.Instances.Builder[e.builderIndex].el.addEventListener(a.mousedown,this._onDrag,
{passive:!0}),l.body[0].classList.remove("tb_disable_padding_dragging"))},addEdgesOptions(a){a=a.closest(".tb_dragger");if(!a.getElementsByClassName("tb_dragger_lightbox")[0]){const h=a.classList.contains("tb_dragger_margin")?"margin":"padding",m=e.Models.Registry.lookup(a.closest("[data-cid]").getAttribute("data-cid"));var b=m.get("elType");b="margin"===h&&("column"===b||"row"===b);var c=["%","em","px"];const k=b?["opposite"]:["all","opposite"],w=a.classList.contains("tb_dragger_top")||a.classList.contains("tb_dragger_bottom")?
"s":"e",r="1"===this.getCurrentStyling(b?"margin-top_opp_top":"checkbox_#id#_apply_all",m,h);var d=a.dataset.u||"px";const n=q.createElement("div"),l=q.createElement("ul"),p=q.createElement("ul");n.className="tb_dragger_lightbox";p.className="tb_dragger_units";l.className="tb_dragger_types";for(var f=c.length-1;-1<f;--f){var g=q.createElement("li");g.textContent=c[f];c[f]===d&&(g.className="current");p.appendChild(g)}for(c=k.length-1;-1<c;--c)d=q.createElement("li"),f=q.createElement("span"),g=!1,
d.className="tb_apply tb_apply_"+k[c],b||"opposite"!==k[c]?g=r:r||(g="#id#_opp_",g+="s"===w?"top":"left",g="1"==this.getCurrentStyling(g,m,h)),g&&(d.className+=" current"),d.appendChild(f),l.appendChild(d);n.appendChild(p);n.appendChild(l);a.getElementsByClassName("tb_dragger_options")[0].appendChild(n)}},clearEdges(){},addEdges(a,b,c){if(!("divider"===a||"row"===a&&c.classList.contains("tb-page-break"))){var d=["padding","margin"],f=["right","bottom","left","top"],g=b.get("elType"),h=[],m=f.length;
for(let w=d.length-1;-1<w;--w){var k=q.createDocumentFragment(),l=d[w],r="module"===g&&"padding"===l?c.getElementsByClassName("module")[0]:c;let t,v="margin"===l&&("column"===a||"row"===a),P,u;"subrow"===g&&"padding"===l&&(r=c.getElementsByClassName("module_subrow")[0]);r&&(r=r.children,t=r.length-1);v?"1"==this.getCurrentStyling("margin-top_opp_top",b,l)&&(P=this.getCurrentStyling("margin-top",b,l),u=this.getCurrentStyling("margin-top_unit",b,l)||"px"):"1"==this.getCurrentStyling("checkbox_#id#_apply_all",
b,l)&&(P=this.getCurrentStyling("#id#_top",b,l),u=this.getCurrentStyling("#id#_top_unit",b,l)||"px");for(let c=m-1;-1<c;--c){if(!("margin"!==l||"column"!==a&&"row"!==a||"right"!==f[c]&&"left"!==f[c]))continue;let d;var n=void 0,p=u;let e=P;if(r)for(n=t;-1<n;--n)if(r[n]&&r[n].classList.contains("tb_dragger_"+f[c])&&r[n].classList.contains("tb_dragger_"+l)){d=r[n];break}if(d)n=d.getElementsByClassName("tb_dragger_value")[0];else{d=q.createElement("div");n=q.createElement("span");d.className="tb_dragger tb_dragger_"+
f[c]+" tb_dragger_"+l;n.className="tb_dragger_value";let a=q.createElement("div"),b=q.createElement("span");b.className="tb_dragger_arrow";a.className="tb_dragger_options";a.tabIndex=-1;a.appendChild(n);a.appendChild(b);d.appendChild(a);k.appendChild(d)}p||(p=v?"#id#-"+f[c]:"#id#_"+f[c],e=this.getCurrentStyling(p,b,l),p=this.getCurrentStyling(p+"_unit",b,l)||"px");void 0===e||null===e||""===e||(d.dataset.u||"px")===p&&d.dataset.v===e||(d.dataset.u=p,d.dataset.v=e,n.textContent=e+p,"padding"!==l&&
h.push(d))}"margin"===l||"module"!==g&&"subrow"!==g?c.appendChild(k):(r=c.getElementsByClassName("subrow"===g?"module_subrow":"module")[0])&&r.appendChild(k);if("padding"!==l)for(k=h.length-1;-1<k;--k)this.setValueByType(h[k],a,h[k].dataset.v,h[k].dataset.u);"row"!==g&&(k="module"===g||"subrow"===g?"column":c.classList.contains("sub_column")?"subrow":"row",l=c.closest(".module_"+k),"subrow"===k&&(l=l.parentNode),this.addEdges(k,e.Models.Registry.lookup(l.dataset.cid),l))}}},optionsClick(a){a.preventDefault();
a.stopPropagation();e.ActionBar.disable=!0;this.addEdgesOptions(a.target.closest(".tb_dragger_options"));a="LI"===a.target.nodeName?a.target:a.target.parentNode;"LI"===a.nodeName&&(!a.classList.contains("current")&&a.parentNode.classList.contains("tb_dragger_units")?this.changeUnit(a):a.parentNode.classList.contains("tb_dragger_types")&&this.changeApply(a));e.ActionBar.disable=null},changeUnit(a){const b=a.closest(".tb_dragger_lightbox").closest(".tb_dragger"),c=b.classList.contains("tb_dragger_padding")?
"padding":"margin",d=b.classList.contains("tb_dragger_top")||b.classList.contains("tb_dragger_bottom")?"s":"e",f=a.textContent||"px";var g=b.dataset.v;const h=b.dataset.u||"px";var m=b.parentNode;a=ThemifyStyles.getSheet(e.activeBreakPoint);const k=a.cssRules;let l=b.getElementsByClassName("tb_dragger_types")[0],r=m.children;var n=m.closest("[data-cid]");g=""!==g?this.convert(b,h,f,g):"";m=e.Models.Registry.lookup(n.getAttribute("data-cid"));let p=m.get("elType"),t=D.clone(n),u=v.extend(!0,{},m.get("module"===
p?"mod_settings":"styling"));l&&(l=l.getElementsByClassName("current")[0])&&(l=l.classList.contains("tb_apply_all")?"all":"opposite");"module"===p&&(p=m.get("mod_name"));const I=ThemifyStyles.getBaseSelector(p,m.get("element_id"));n=K(k,I);q.body.classList.add("tb_edge_drag_start");for(let e=r.length-1;-1<e;--e){let h=r[e].classList;if(h.contains("tb_dragger_"+c)){var x="left";h.contains("tb_dragger_bottom")?x="bottom":h.contains("tb_dragger_right")?x="right":h.contains("tb_dragger_top")&&(x="top");
if(r[e]!==b&&(!l||"opposite"===l&&("s"===d&&("left"===x||"right"===x)||"e"===d&&("top"===x||"bottom"===x))))continue;let q=r[e].getElementsByClassName("tb_dragger_units")[0],w=c+"-"+x,t="",u=g+f;x="margin"!==c||"column"!==p&&"row"!==p?"#id#_"+x:"#id#-"+x;!1!==n&&k[n]?(t=k[n].style[E(w)],k[n].style[E(w)]=u):(n=k.length,a.insertRule(I+"{"+w+":"+u+";}",n));if(q){q=q.children;for(let a=q.length-1;-1<a;--a)q[a].classList.toggle("current",q[a].textContent===f)}"em"!==f&&""!==g&&(g=Math.round(g));"padding"!==
c&&this.setValueByType(r[e],p,g,f);r[e].getElementsByClassName("tb_dragger_value")[0].textContent=""===g?"":u;r[e].dataset.v=g;r[e].dataset.u=f;h.add("tb_dragger_dragged");this.setData(m,this.getFieldId(x,m,c),g,f);this.setUndoData(n,w,u,t)}}const B=this;setTimeout(function(){for(let a=r.length-1;-1<a;--a)r[a].classList.remove("tb_dragger_dragged");q.body.classList.remove("tb_edge_drag_start");f!==h&&B.addUndo(t,u);t=u=r=null},500)},changeApply(a){const b=a.closest(".tb_dragger");var c=b.parentNode;
const d=b.classList.contains("tb_dragger_padding")?"padding":"margin";var f=b.classList.contains("tb_dragger_top")||b.classList.contains("tb_dragger_bottom")?"s":"e",g=c.closest("[data-cid]");c=e.Models.Registry.lookup(g.getAttribute("data-cid"));const h=c.get("elType");g=D.clone(g);const m=v.extend(!0,{},c.get("module"===h?"mod_settings":"styling")),k=a.classList.contains("current")?"":"1",l=a.nextSibling?a.nextElementSibling:a.previousElementSibling;let r="margin-top_opp_top",n;if("margin"!==d||
"column"!==h&&"row"!==h)n="checkbox_#id#_apply_all",r="#id#_opp_"+("s"===f?"top":"left"),a.classList.contains("tb_apply_all")&&(f=r,r=n,n=f);l&&l.classList.remove("current");a.classList.toggle("current",k);this.setData(c,this.getFieldId(r,c,d),k);n&&this.setData(c,this.getFieldId(n,c,d),"");this.changeUnit(b.getElementsByClassName("tb_dragger_units")[0].getElementsByClassName("current")[0]);this.onChange();this.addUndo(g,m)},convert(a,b,c,d){if(!d)return 0;b||(b="px");c||(c="px");if(b===c)return d;
let e;a=a.parentNode;if(a.classList.contains("active_module")){var g=a.classList.contains("active_subrow")?"module_subrow":"module";a=a.getElementsByClassName(g)[0]}g="em"===c||"em"===b?parseFloat(getComputedStyle(a).fontSize):null;a="%"===c||"%"===b?a.parentNode.offsetWidth:null;"px"===b?"em"===c?e=+parseFloat(d/g).toFixed(2):"%"===c&&(e=parseFloat(100*d/a)):"%"===b?(e=parseFloat(d*a/100),e="em"===c?+parseFloat(e/g).toFixed(2):parseFloat(e)):(e=parseFloat(d*g),"%"===c&&(e=parseFloat(100*e/a)),e=
parseFloat(e));return Number(e.toFixed(2))},setValueByType(a,b,c,d){let e="margin";d||(d="px");const g=a.classList;for(let a=g.length-1;-1<a;--a)if("tb_dragger_top"===g[a]||"tb_dragger_bottom"===g[a]||"tb_dragger_left"===g[a]||"tb_dragger_right"===g[a]){e+="-"+g[a].replace("tb_dragger_","");break}"px"!==d&&""!==c&&(c=this.convert(a,d,"px",c),d="px");if(void 0===c||null===c)c="";a.style["margin-top"===e||"margin-bottom"===e?"height":"width"]=""===c?"":(0<c?c:-c)+d;if("row"===b||"column"===b)a.style[e]=
""===c?"":-c+d},getFieldId(a,b,c){const d=b.get("elType");b=ThemifyStyles.getStyleOptions("module"===d?b.get("mod_name"):d);"margin"===c&&("row"===d||"column"===d)||void 0!==b[c+"_top"]&&b[c+"_top"].type===c||(c=c[0]);return a.replace("#id#",c)},getCurrentStyling(a,b,c){var d=b.get("elType");d="row"===d||"column"===d||"subrow"===d?b.get("styling"):b.get("mod_settings");a=this.getFieldId(a,b,c);if(null!==e.activeModel&&e.activeModel.cid===b.cid&&(b=D.Lightbox.$lightbox[0].querySelector("#"+a),null!==
b))if(b.classList.contains("themify-checkbox")){if(b=b.getElementsByClassName("tb-checkbox")[0])return b.checked?b.value:!1}else return b.value;if("desktop"===e.activeBreakPoint)return d[a];b=ThemifyConstructor.breakpointsReverse;c=b.indexOf(e.activeBreakPoint);for(let e=c,g=b.length;e<g;++e)if("desktop"!==b[e]){if(void 0!==d["breakpoint_"+b[e]]&&void 0!==d["breakpoint_"+b[e]][a]&&""!==d["breakpoint_"+b[e]][a])return d["breakpoint_"+b[e]][a]}else if(""!==d[a])return d[a]},setData(a,b,c,d){c&&d&&"em"!==
d&&(c=Number(c));if(null!==e.activeModel&&a.cid===e.activeModel.cid){var f=D.Lightbox.$lightbox[0].querySelector("#"+b);if(null!==f){if(f.classList.contains("themify-checkbox")){if(f=f.getElementsByClassName("tb-checkbox")[0])f.checked=!!c}else if(f.value=c,f=D.Lightbox.$lightbox[0].querySelector("#"+b+"_unit"))f.value=d;f&&l.triggerEvent(f,"change");return}"desktop"===e.activeBreakPoint?(ThemifyConstructor.values[b]=c,d&&(ThemifyConstructor.values[b+"_unit"]=d)):(ThemifyConstructor.values["breakpoint_"+
e.activeBreakPoint]||(ThemifyConstructor.values["breakpoint_"+e.activeBreakPoint]={}),ThemifyConstructor.values["breakpoint_"+e.activeBreakPoint][b]=c,d&&(ThemifyConstructor.values["breakpoint_"+e.activeBreakPoint][b+"_unit"]=d))}f="module"===a.get("elType")?"mod_settings":"styling";const g=v.extend(!0,{},a.get(f)),h={};"desktop"!==e.activeBreakPoint?(g["breakpoint_"+e.activeBreakPoint]||(g["breakpoint_"+e.activeBreakPoint]={}),g["breakpoint_"+e.activeBreakPoint][b]=c,d&&(g["breakpoint_"+e.activeBreakPoint][b+
"_unit"]=d)):(c?g[b]=c:delete g[b],d&&("px"===d?delete g[b+"_unit"]:g[b+"_unit"]=d));h[f]=g;a.set(h,{silent:!0})},onChange(){setTimeout(function(){e.Utils._onResize(!0)},1500)},setUndoData(a,b,c,d){void 0===this.undoData[e.activeBreakPoint]&&(this.undoData[e.activeBreakPoint]={});void 0===this.undoData[e.activeBreakPoint][a]&&(this.undoData[e.activeBreakPoint][a]={});b=E(b);a=this.undoData[e.activeBreakPoint][a];void 0===a[b]&&(a[b]={});a[b].a=c;void 0===a[b].b&&(a[b].b=d)},addUndo(a,b){const c=a[0].getAttribute("data-cid");
if(null===e.activeModel||e.activeModel.cid!==c){var d=e.Models.Registry.lookup(c);const f=!0===e.hasChanged,g=v.extend(!0,{},this.undoData);d=v.extend(!0,{},"module"===d.get("elType")?d.get("mod_settings"):d.get("styling"));const h=D.clone(q.getElementsByClassName("tb_element_cid_"+c)[0]);a[0].classList.remove("tb_element_clicked");h[0].classList.remove("tb_element_clicked");e.hasChanged=!0;e.undoManager.push(c,a,h,"save",{bsettings:b,asettings:d,styles:g,column:!1});e.hasChanged=f}this.undoData=
{}},setModulePosition(a){const b=e.ActionBar.prevExpand;if(b){var c=a.getElementsByClassName("tb_dragger_value")[0];b.style.top="";c&&c.firstChild&&(c=c.getBoundingClientRect(),b.getBoundingClientRect().bottom>=c.top&&(b.style.top=a.offsetHeight/2+c.height+"px"))}},drag(a){if("touchstart"===a.type||1===a.which)if(a.target.closest(".tb_dragger_options")){const b=e.Utils.getMouseEvents(),c=this,d=a.target;q.addEventListener(b.mouseup,function(a){if(d===a.target){if(a.target.classList.contains("tb_dragger_arrow")){!0!==
e.ActionBar.isHoverMode&&e.ActionBar.el.classList.remove("tb_show_toolbar");this.body.classList.add("tb_dragger_options_open");let a=d.closest(".tb_dragger");const b=function(d){"mouseout"!==d.type&&d.target.closest(".tb_dragger_options")||(!0!==e.ActionBar.isHoverMode&&e.ActionBar.el.classList.add("tb_show_toolbar"),q.removeEventListener("click",b,{passive:!0}),u.document.removeEventListener("click",b,{passive:!0}),a.removeEventListener("mouseleave",b,{once:!0,passive:!0}),a.classList.contains("tb_dragger_padding")&&
a.classList.contains("tb_dragger_top")&&c.setModulePosition(a),q.body.classList.remove("tb_dragger_options_open"),(d=a.getElementsByClassName("tb_dragger_lightbox")[0])&&d.remove(),a=null)};a.addEventListener("mouseleave",b,{once:!0,passive:!0});this.addEventListener("click",b,{passive:!0});u.document.addEventListener("click",b,{passive:!0})}c.optionsClick(a)}},{once:!0})}else if(a.target.classList.contains("tb_dragger")){a.stopImmediatePropagation();var b=a.target,c=this,d=e.Utils.getMouseEvents(),
f=b.closest("[data-cid]"),g=e.Models.Registry.lookup(f.getAttribute("data-cid"));if(g){let h=[],m,k,p=a.clientX,r=a.clientY,n,t,O,M,I,x,B,N="",C;const y=g.get("elType"),L="module"===y?g.get("mod_name"):y,z=b.classList.contains("tb_dragger_padding")?"padding":"margin",F=b.classList.contains("tb_dragger_top")||b.classList.contains("tb_dragger_bottom")?"s":"e",J="s"===F?b.classList.contains("tb_dragger_top")?"top":"bottom":b.classList.contains("tb_dragger_left")?"left":"right",A=b.dataset.u||"px",G=
function(a){a.stopImmediatePropagation();q.body.classList.add("tb_start_animate","tb_edge_drag_start");u.document.body.classList.add("tb_start_animate","tb_edge_drag_start");q.body.style.cursor=v(b).css("cursor");e.ActionBar.hideContextMenu();e.ActionBar.clear();e.ActionBar.disable=!0;(a=b.getElementsByClassName("tb_dragger_lightbox")[0])&&a.remove();c.addEdgesOptions(b);n=parseFloat(b.dataset.v)||0;n="em"!==A?parseInt(n):Number(n.toFixed(2));(t=b.getElementsByClassName("tb_dragger_types")[0])&&(t=
t.getElementsByClassName("current")[0])&&(t=t.classList.contains("tb_apply_all")?"all":"opposite");O=D.clone(f);I=v.extend(!0,{},g.get("module"===y?"mod_settings":"styling"));M=null!==e.activeModel&&e.activeModel.cid===g.cid;N=ThemifyStyles.getBaseSelector(L,g.get("element_id"));x=ThemifyStyles.getSheet(e.activeBreakPoint);B=x.cssRules;C=K(B,N);m="module"===y?f.getElementsByClassName("module")[0]:"subrow"===y?f.getElementsByClassName("module_subrow")[0]:f;f.style.willChange=z;a=b.parentNode.children;
for(let b=a.length-1;-1<b;--b){let c=a[b].classList;if(c.contains("tb_dragger_"+z)){let d="left";c.contains("tb_dragger_bottom")?d="bottom":c.contains("tb_dragger_right")?d="right":c.contains("tb_dragger_top")&&(d="top");if(J===d||t&&("opposite"!==t||("s"!==F||"left"!==d&&"right"!==d)&&("e"!==F||"top"!==d&&"bottom"!==d)))a[b].classList.add("tb_dragger_dragged"),h.push({el:a[b],prop:z+"-"+d,text:a[b].getElementsByClassName("tb_dragger_value")[0]})}}f.classList.add("tb_element_clicked")},H=function(a){a.stopImmediatePropagation();
k&&cancelAnimationFrame(k);k=requestAnimationFrame(function(){var d=a.clientX,f=a.clientY;var g="px"===A||"%"===A?1:.1;var k=b.getBoundingClientRect();var l="e"===F?"left"===J?d-k.right:k.left-d:"top"===J?f-k.bottom:k.top-f;if("e"===F&&40<k.width&&(d<k.left||d>k.right)||"s"===F&&40<k.height&&(f<k.top||f>k.bottom))if("%"===A&&65<n||"px"===A&&51<n||"em"===A&&1.5<n)0>l&&(l*=-1),50<l&&(g=100<l?300<l?6*g:g*(150<l?200<l?5:4:3):2*g);"e"===F?d!==r&&(n=d>r?"left"===J?n+g:n-g:"left"===J?n-g:n+g):f!==p&&(n=
f>p?n+g:n-g);r=d;p=f;0>n&&"padding"===z?n=0:0!==n%1&&(n=parseFloat(n.toFixed(1)));d=n+A;for(f=h.length-1;-1<f;--f){g=h[f].prop;k=h[f].el;l=h[f].text;m.style[g]=d;!0===M&&e.liveStylingInstance.setLiveStyle(g,d,N);if("margin"===z){let a=k.classList.contains("tb_dragger_top")||k.classList.contains("tb_dragger_bottom")?"height":"width",b=n,e=A;"px"!==e&&(b=c.convert(k,e,"px",b),e="px");if("row"===y||"column"===y)k.style[g]=""===d?"":-b+e;k.style[a]=0>n?-b+e:b+e}l.textContent=0===n?"":d}})};q.addEventListener(d.mouseup,
function(a){this.removeEventListener(d.mousemove,G,{passive:!0,once:!0});this.removeEventListener(d.mousemove,H,{passive:!0});l.trigger("tbDisableInline");O&&(k&&cancelAnimationFrame(k),this.body.style.cursor=f.style.willChange="",this.body.classList.remove("tb_start_animate","tb_edge_drag_start"),u.document.body.classList.remove("tb_start_animate","tb_edge_drag_start"),l.trigger("tbresizeImageEditor"),requestAnimationFrame(function(){f.classList.remove("tb_element_clicked");for(let b=h.length-1;-1<
b;--b){let d=h[b].el,e=h[b].prop,f=m.style[e];var a=e.replace(z+"-","");let k="";a="margin"!==z||"column"!==y&&"row"!==y?"#id#_"+a:"#id#-"+a;let l=d.getElementsByClassName("tb_dragger_lightbox")[0];0===n&&"margin"===z&&(d.style[E(h[b].prop)]=d.style.width=d.style.height="");l&&l.remove();!1!==C&&B[C]?(k=B[C].style[E(e)],B[C].style[E(e)]=f):(C=B.length,x.insertRule(N+"{"+e+":"+f+";}",C));m.style[e]="";!1===M&&c.setUndoData(C,e,f,k);d.dataset.v=n;d.dataset.u=A;d.classList.remove("tb_dragger_dragged");
c.setData(g,c.getFieldId(a,g,z),n,A)}"padding"===z&&"top"===J&&"module"===y&&c.setModulePosition(h[0].el);c.onChange();e.Mixins.Builder.update(v(f));!1===M&&c.addUndo(O,I);e.ActionBar.disable=t=m=e.ActionBar.hoverCid=k=x=B=C=N=M=h=O=I=n=p=r=null;e.hasChanged=!0}))},{once:!0,passive:!0});q.addEventListener(d.mousemove,G,{passive:!0,once:!0});q.addEventListener(d.mousemove,H,{passive:!0})}}}};e.createStyleInstance=function(){return new p}})(jQuery,Themify,window,window.top,document,tb_app,ThemifyBuilderCommon);
