'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,l,f){if(e==Array.prototype||e==Object.prototype)return e;e[l]=f.value;return e};
$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var l=0;l<e.length;++l){var f=e[l];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,l){var f=$jscomp.propertyToPolyfillSymbol[l];if(null==f)return e[l];f=e[f];return void 0!==f?f:e[l]};$jscomp.polyfill=function(e,l,f,g){l&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,l,f,g):$jscomp.polyfillUnisolated(e,l,f,g))};
$jscomp.polyfillUnisolated=function(e,l,f,g){f=$jscomp.global;e=e.split(".");for(g=0;g<e.length-1;g++){var h=e[g];if(!(h in f))return;f=f[h]}e=e[e.length-1];g=f[e];l=l(g);l!=g&&null!=l&&$jscomp.defineProperty(f,e,{configurable:!0,writable:!0,value:l})};
$jscomp.polyfillIsolated=function(e,l,f,g){var h=e.split(".");e=1===h.length;g=h[0];g=!e&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var z=0;z<h.length-1;z++){var c=h[z];if(!(c in g))return;g=g[c]}h=h[h.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?g[h]:null;l=l(f);null!=l&&(e?$jscomp.defineProperty($jscomp.polyfills,h,{configurable:!0,writable:!0,value:l}):l!==f&&($jscomp.propertyToPolyfillSymbol[h]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(h):$jscomp.POLYFILL_PREFIX+h,h=
$jscomp.propertyToPolyfillSymbol[h],$jscomp.defineProperty(g,h,{configurable:!0,writable:!0,value:l})))};$jscomp.arrayIteratorImpl=function(e){var l=0;return function(){return l<e.length?{done:!1,value:e[l++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.makeIterator=function(e){var l="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return l?l.call(e):$jscomp.arrayIterator(e)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise.allSettled",function(e){function l(e){return{status:"fulfilled",value:e}}function f(e){return{status:"rejected",reason:e}}return e?e:function(e){var g=this;e=Array.from(e,function(e){return g.resolve(e).then(l,f)});return g.all(e)}},"es_2020","es3");
(function(e,l,f,g,h,z){let c,Q,A,N,da,Y,ea,t,m=null,T=null,P=null,w=null,p=null,n=null,C=!1,U=!1,F=!1,K,k,V,Z=!1,L,R=!1,O=!1;const E=h.Utils.getMouseEvents(),M=e.isTouch?E:{mousedown:"click"},x=function(a,b){h.hasChanged=!0;g.execCommand(a,!1,void 0!==b?b:null);H()},ia=function(a){a=g.queryCommandState(a);return-1===a?!1:a},B={formatBlock:{result(a){a=a.parentNode.classList.contains("tb_editor_selected")?"p":a.getAttribute("data-action");x("formatBlock","<"+a+">")},state(a){a=a.getElementsByClassName("tb_editor_options")[0].getElementsByClassName("tb_editor_action");
const b=g.queryCommandValue("formatBlock");for(let d=a.length-1;-1<d;--d){let c=a[d].parentNode.classList;b===a[d].getAttribute("data-action")?c.contains("tb_editor_selected")||(c.add("tb_editor_selected"),ja(a[d])):c.remove("tb_editor_selected")}}},text_align:{result(a){a.parentNode.classList.contains("tb_editor_selected")?n&&(n.startContainer&&(n.startContainer.parentNode.style.textAlign="",(a=n.startContainer.parentNode.closest("[style*=text-align]"))&&(a.style.textAlign="")),n.commonAncestorContainer&&
(n.commonAncestorContainer.nodeType!==Node.TEXT_NODE&&(n.commonAncestorContainer.style.textAlign=""),(a=n.startContainer.parentNode.closest("[style*=text-align]"))&&(a.style.textAlign="")),H()):x(a.getAttribute("data-action"))},state(a){const b=a.getElementsByClassName("tb_editor_options")[0].getElementsByClassName("tb_editor_action");let d=!1;for(let a=b.length-1;-1<a;--a){let c=b[a].parentNode.classList;b[a].hasAttribute("data-action")&&ia(b[a].getAttribute("data-action"))?(c.contains("tb_editor_selected")||
ja(b[a]),d=!0):c.remove("tb_editor_selected")}!1===d&&a.classList.remove("tb_editor_selected")}},list:{result(a){x(a.getAttribute("data-action"))},state(a){B.text_align.state(a)}},image:{state(a){},result(a){const b=g.createElement("div"),d=g.createElement("hidden");Z=!0;let v;d.addEventListener("change",function(a){a.stopImmediatePropagation();a=v.state().get("selection").first().toJSON();var f=a.id;const r=null!==c.closest("[data-hasEditor]");var D=c.classList;let m=a.title||"",q=a.alt||m;for(var k=
D.length-1;-1<k;--k)if(0===D[k].indexOf("wp-image-")){D.remove(D[k]);break}D.add("wp-image-"+f);if(C){K=z.clone(c.closest(".active_module"));const b=g.createElement("div");f=c.hasAttribute("data-w")||c.hasAttribute("data-h");D=c.hasAttribute("data-w")?c.getAttribute("width"):!1;k=c.hasAttribute("data-h")?c.getAttribute("height"):!1;const d=function(){R=!0;aa(!r);const a=c.closest(".active_module");a&&(c.hasAttribute("data-update")&&(a.innerHTML=a.innerHTML,c=a.getElementsByClassName("tb_selected_img")[0]),
h.Mixins.Builder.update(l(a)));e.trigger("tb_image_resize",c);ba();S();e.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(S)},25)},500);b.remove()};b.className="tf_loader";p.appendChild(b);p.classList.add("tb_image_editor_loading");c.removeAttribute("srcset");!r&&f?(c.setAttribute("data-orig",a.url),c.setAttribute("data-ext",a.mime)):(c.removeAttribute("data-ext"),c.removeAttribute("data-orig"),r&&(c.alt=q,c.title=m));if(!f||r&&!D&&!k)c.width=a.width,c.height=a.height;!D&&
!k||r?(c.addEventListener("load",d,{passive:!0,once:!0}),c.setAttribute("src",a.url)):h.Utils.resizeImage(c,D,k).finally(d)}else I(),x("insertImage",a.url);d.remove();b.remove();Z=!1},{passive:!0,once:!0});ThemifyConstructor.file.browse(b,d,ThemifyConstructor,"image");b.click();v=ThemifyConstructor.file._frames.image;const f=function(){v.off("close",f);Z=!1;setTimeout(function(){v=null},50)};v.on("close",f)}},link:{state(a){if(n){a=n.startContainer.parentNode.closest("a");const b=m.classList;a&&a===
n.endContainer.parentNode.closest("a")?(P.firstChild.textContent=P.nextElementSibling.href=a.getAttribute("href"),b.add("tb_editor_show_link"),y(),G(!0)):m.classList.contains("tb_editor_show_link")&&(P.firstChild.textContent=P.nextElementSibling.href="",b.remove("tb_editor_show_link"),y(),G(!0))}},result(a){a=m.getElementsByClassName("tb_editor_link_options")[0].cloneNode(!0);const b=a.getElementsByClassName("tb_editor_link_input")[0];var d=a.querySelector("#tb_editor_link_type"),c=n.startContainer.parentNode.closest("a"),
e=ThemifyConstructor,g={px:{min:1,max:5E4},"%":{min:1,max:500}};a.querySelector("#tb_editor_lb_w_holder").replaceWith(e.range.render({id:"tb_editor_lb_w",control:!1,units:g},e));a.querySelector("#tb_editor_lb_h_holder").replaceWith(e.range.render({id:"tb_editor_lb_h",control:!1,units:g},e));e=a.querySelector("#tb_editor_lb_w");g=a.querySelector("#tb_editor_lb_h");const f=a.querySelector("#tb_editor_lb_w_unit"),h=a.querySelector("#tb_editor_lb_h_unit");b.value=e.value=g.value="";d.selectedIndex=f.selectedIndex=
h.selectedIndex=0;if(c&&c===n.endContainer.parentNode.closest("a")){var l=c.getAttribute("target");b.value=c.getAttribute("href");"_blank"!==l&&c.hasAttribute("data-zoom-config")&&(l="lightbox");l&&(d.value!==l&&(d.value=l),"lightbox"===l&&(d=c.getAttribute("data-zoom-config").split("|"),c=-1!==d[0].indexOf("%")?"%":"px",l=d[1]&&-1!==d[1].indexOf("%")?"%":"px",parseInt(d[0])!==parseInt(e.value)&&(e.value=parseInt(d[0])),parseInt(d[1])!==parseInt(g.value)&&(g.value=parseInt(d[1])),f.value!==c&&(f.value=
c),h.value!==l&&(h.value=l),a.querySelector(".tb_editor_lightbox_actions").classList.remove("tf_hide")))}a.addEventListener("focusout",ka,{passive:!0});a.addEventListener("change",ka,{passive:!0});a.querySelector("#tb_editor_link_type").addEventListener("change",function(a){this.closest("form").querySelector(".tb_editor_lightbox_actions").classList.toggle("tf_hide","lightbox"!==this.value);I();y();G(!0)},{passive:!0});w.appendChild(la());w.appendChild(a);m.classList.add("tf_hide","tb_editor_dialog_open",
"tb_editor_dialog_link","tf_opacity");a.classList.remove("tf_hide");I();y();G(!0);setTimeout(function(){b.focus()},100)}},font:{state(a){g.queryCommandValue("fontName")},result(a){var b=g.createElement("span"),d=g.createDocumentFragment();a=g.queryCommandValue("fontName");b.className="themify_tooltip";b.textContent="themify_tooltip";d.appendChild(ThemifyConstructor.font_select.render({id:"",control:!1},ThemifyConstructor));d=d.firstChild;m.classList.add("tf_hide","tb_editor_dialog_open","tb_editor_dialog_font",
"tf_opacity");ma(d);b=d.getElementsByClassName("font-family-select")[0];e.triggerEvent(b.closest(".tb_font_preview_wrapper"),"tf_init");b.addEventListener("change",function(a){a.stopPropagation();F=!0;I();x("styleWithCSS",!0);x("fontName",this.value||"inherit");setTimeout(function(){W();F=!1},10)},{passive:!0});I();y();G(!0);a&&(a=a.replace(/["']/g,""),b.querySelector('[value="'+CSS.escape(a)+'"]')&&(b.value=a,d.getElementsByClassName("themify-combo-input")[0].value=a,d=d.getElementsByClassName("themify-combo-dropdown")[0],
a=d.querySelector('[data-value="'+CSS.escape(a)+'"]')))&&(a.classList.add("themify-combo-selected"),d.style.scrollBehavior="auto",d.scrollTop=a.offsetTop-a.offsetHeight,d.style.scrollBehavior="")}},unlink:{result(a){I();if((a=n?n.startContainer.parentNode.closest("a"):null)&&a===n.endContainer.parentNode.closest("a")){const b=g.createRange(),d=f.getSelection();b.selectNodeContents(a);d.removeAllRanges();d.addRange(b)}x("unlink");W()}},unlinkBack:{result(a){B.unlink.result(a);X()}},color:{result(a){var b=
g.createElement("span");const d=function(a){F=!0;I();x("styleWithCSS",!0);x("foreColor",a);setTimeout(function(){W();F=!1},10)};var c=g.createDocumentFragment();a=g.queryCommandValue("foreColor");b.className="themify_tooltip";b.textContent="themify_tooltip";c.appendChild(ThemifyConstructor.color.render({id:"",control:!1},ThemifyConstructor));c=c.firstChild;m.classList.add("tf_hide","tb_editor_dialog_open","tb_editor_dialog_color","tf_opacity");ma(c);const f=c.getElementsByClassName("tfminicolors-input")[0];
b=c.getElementsByClassName("tfminicolors-swatch")[0];c=c.getElementsByClassName("color_opacity")[0];if(a){let b=1;-1<a.indexOf("rgb")&&(b=-1<a.indexOf("rgba")?parseFloat(a.split(",").slice(-1).pop()):1,a=(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):"");f.value=a;c.value=b}b.click();f.addEventListener("themify_builder_color_picker_change",
function(a){a.stopPropagation();"tb_editor_dialog_content"!==g.activeElement.id&&w.contains(g.activeElement)||d(a.detail.val)},{passive:!0});f.addEventListener("change",function(a){a.stopPropagation();d(l(this).tfminicolors("rgbaString"))},{passive:!0});c.addEventListener("change",function(a){R=!0;a.stopPropagation();e.triggerEvent(f,"change")},{passive:!0});y();G(!0)}}},aa=function(a){if(c&&R){const v=h.Models.Registry.lookup(A),t=!(!h.activeModel||A!==h.activeModel.cid);if(v){var b=t?{}:v.get("mod_settings"),
d=l.extend(!0,{},b),f=!1,D=!a&&C,r=c;b||(b={});if(D){var k=r.getAttribute("data-w");var m=r.getAttribute("data-h");if(!k&&!m){r=r.closest("[data-hasEditor]");if(!r)return;D=!1;O=!0}if(D&&(a=!1,k&&(b[k]=r.getAttribute("width"),a=parseInt(d[k])!==parseInt(b[k])),m&&(b[m]=r.getAttribute("height"),!0!==a&&(a=parseInt(d[m])!==parseInt(b[m]))),!a))return}(a=r.getAttribute("data-repeat"))&&!isNaN(a)&&(a=!1);var n=r.getAttribute("data-name");if(a){void 0===b[a]&&(b[a]={});f=r.hasAttribute("data-index")?parseInt(r.getAttribute("data-index")):
!1;if(!1===f){var p=r.closest(".tf_swiper-slide");p||(p=r.closest("li"))||(p=r.closest(".module-"+v.get("mod_name")+"-item"));if(p){const a=p.parentNode.children;for(let b=a.length-1;-1<b;--b)if(a[b]===p){f=b;break}}}if(!1!==f)void 0===b[a][f]&&(b[a][f]={});else return}if(!D){if(!n)return;var q="IMG"===r.tagName?r.hasAttribute("data-orig")?r.getAttribute("data-orig"):r.getAttribute("src"):O?r.innerHTML:r.innerText;!1!==f?(p=void 0!==d[a]&&void 0!==d[a][f]&&void 0!==d[a][f][n]?d[a][f][n]:null,b[a][f][n]=
q):(p=d[n],b[n]=q);if(p===q)return}if(d!==b){if(t){d=z.Lightbox.$lightbox[0];if(D){if(q=!1,f=k?d.querySelector(".tb_lb_option#"+k):null,a=m?d.querySelector(".tb_lb_option#"+m):null,f&&f.value!=b[k]&&(q=!0,f.value=ThemifyConstructor.settings[k]=b[k]),a&&a.value!=b[m]&&(q=!0,a.value=ThemifyConstructor.settings[m]=b[m]),!1===q)return}else if(a?(void 0===ThemifyConstructor.settings[a]&&(ThemifyConstructor.settings[a]={}),void 0===ThemifyConstructor.settings[a][f]&&(ThemifyConstructor.settings[a][f]={}),
ThemifyConstructor.settings[a][f][n]=q):ThemifyConstructor.settings[n]=q,b={el:"",val:q,data:b,cid:A,activeEl:c},e.triggerEvent(g,"tb_inline_item",b),q=b.val,(b=b.el)||(b=a?d.querySelector("#"+a).querySelectorAll('[data-input-id="'+n+'"]'):d.querySelector(".tb_lb_option#"+n)),b){if(a&&(b=b[f],!b)||b.value===q)return;b.value=q;C&&(k=b.closest(".tb_uploader_wrapper"))&&(k=k.querySelector(".tb_media_uploader img"))&&(k.src=q);O&&"undefined"!==typeof tinyMCE&&tinyMCE&&(b=tinyMCE.get(b.id))&&b.setContent(q)}h.hasChanged=
!0}else b={val:q,data:b,cid:A,activeEl:c},e.triggerEvent(g,"tb_inline_save",b),q=b.val,b=b.data,!1!==f?b[a][f][n]=q:b[n]=q,h.hasChanged=!0,K&&(h.undoManager.push(A,K,z.clone(r.closest(".active_module")),"save",{bsettings:d,asettings:l.extend(!0,{},b)}),K=null),v.set(b,{silent:!0});ba()}}}},na=function(a){a.preventDefault()},ca=function(a){a.stopImmediatePropagation();C&&(c.hasAttribute("data-name")||c.closest("[data-hasEditor]"))&&(a.target===p||p.contains(a.target))&&B.image.result()},ra=function(){h.Instances.Builder[h.builderIndex].el.addEventListener(E.mousedown,
function(a){if((1===a.which||a.touches)&&(a=(C="IMG"===a.target.tagName)?a.target:a.target.closest("[contentEditable]"))&&!a.closest(".tb_disable_sorting")&&(C||!1===a.contentEditable||"false"===a.contentEditable)){J();f.getSelection().removeAllRanges();const b=a.closest(".active_module");b&&b.classList.add("tb_editor_clicked");C||(a.focus(),a.contentEditable=!0);const c=function(a){this.removeEventListener("drag",c,{passive:!0,once:!0});this.removeEventListener(M.mousedown,c,{passive:!0,once:!0});
const b=this.closest(".active_module");b&&b.classList.remove("tb_editor_clicked");fa();"drag"===a.type&&u()};a.addEventListener("drag",c,{passive:!0,once:!0});a.addEventListener(M.mousedown,c,{passive:!0,once:!0})}},{passive:!0});h.Instances.Builder[h.builderIndex].el.addEventListener(M.mousedown,function(a){var b=a.target;if(b.hasAttribute("data-target")){let a=b.closest(".active_module");a&&(a=a.querySelector(b.getAttribute("data-target")))&&(b=a)}const d=(C="IMG"===b.tagName)?b:b.closest("[contentEditable]");
if(d&&((d.closest("label")||d.closest("a")||d.closest("button"))&&a.preventDefault(),c!==d&&(c&&u(),(1===a.which||a.touches)&&(!C||d.getAttribute("data-w")||d.getAttribute("data-h")||d.getAttribute("data-name")||d.closest("[data-hasEditor]"))))){R=!1;t=e.body[0].classList;J();t.add("tb_editor_active");f.top.document.body.classList.add("tb_editor_active");O=!C&&d.hasAttribute("data-hasEditor");c=d;var v=c.closest(".active_module");if(a=d.closest("form"))for(a.addEventListener("submit",na),a=a.querySelectorAll("[required]"),
b=a.length-1;-1<b;--b)a[b].removeAttribute("required"),a[b].setAttribute("data-required",1);for(a=c;a&&a!==v;)a.style["animation-name"]&&(a.setAttribute("data-tmp-animation",a.style["animation-name"]),a.style["animation-name"]="none"),a=a.parentNode;a=null;v&&(K=z.clone(v),v.classList.add("tb_editor_on"),v.classList.remove("tb_editor_clicked"),A=v.getAttribute("data-cid"));(k=(k=c.closest(".tf_swiper-container"))&&k.swiper?k.swiper:null)&&k.params&&k.params.autoplay&&k.params.autoplay.enabled&&(k.el.dataset.stopped=
!0,k.autoplay.stop(),k.params.thumbs&&k.params.thumbs.swiper.autoplay&&k.params.thumbs.swiper.autoplay.enabled&&(k.params.thumbs.swiper.el.dataset.stopped=!0,k.params.thumbs.swiper.autoplay.stop()));C?(t.add("tb_editor_image_active"),f.top.document.body.classList.add("tb_editor_image_active"),e.on("tfsmartresize",S).on("tbresizeImageEditor",S)):(V=O?c.innerHTML:c.textContent,c.contentEditable=!0,c.focus(),c.addEventListener("blur",u,{passive:!0}),c.addEventListener("input",H,{passive:!0}),c.addEventListener("change",
H,{passive:!0}),e.isTouch||setTimeout(function(){v&&v.addEventListener("dblclick",ca,{passive:!0})},800),Q=h.undoManager.stack,h.undoManager.reset());e.on("tbDisableInline",u);g.addEventListener(E.mousedown,u,{passive:!0});f.top.document.addEventListener(E.mousedown,u,{passive:!0});setTimeout(function(){z.Lightbox.$lightbox.one("themify_opened_lightbox",oa)},600);O?(g.addEventListener("selectionchange",pa,{passive:!0}),ua(),y(),m.addEventListener(M.mousedown,qa),P=m.querySelector("#tb_editor_link_value"),
w=m.querySelector("#tb_editor_dialog"),G()):C&&(d.closest(".masonry")?e.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(function(){ha(d)})},25)},500):ha(d))}})},y=function(){const a=m.className;var b=m.classList;b.add("tf_hidden");b.remove("tf_hide");b=m.getBoundingClientRect();N=b.width+40;da=b.height+30;m.className=a},W=function(){const a=f.getSelection();n=!1===a.isCollapsed?a.getRangeAt(0).cloneRange():null},I=function(){if(!1===U&&n){U=!0;c.focus();const a=f.getSelection();
a.removeAllRanges();a.addRange(n);U=!1}},ua=function(){if(null===m){const a=g.getElementById("tmpl-builder_inline_editor");a&&(g.body.appendChild(a.content),a.remove());m=g.getElementById("tb_editor")}return m},qa=function(a){var b=a.target.closest(".tb_editor_action");a.stopPropagation();b&&"submit"!==b.type&&(a.preventDefault(),F=!0,(a=b.getAttribute("data-type"))||(a=b.closest("[data-type]").getAttribute("data-type")),"expand"!==a?(void 0!==B[a]&&void 0!==B[a].result?B[a].result(b):(I(),x(a)),
sa()):!b.classList.contains("tb_editor_disable")&&(b=h.Models.Registry.lookup(A))&&(u(),f.getSelection().removeAllRanges(),b.trigger("edit",null)),F=!1)},H=function(a){a&&a.stopPropagation();if(c){R=!0;const b=O?c.innerHTML:c.textContent;if(V!==b||C)h.hasChanged=!0,h.activeModel&&h.activeModel.cid===A&&aa(),a&&"input"!==a.type||h.undoManager.push(A,V,b,"inline",c),V=b}},ka=function(a){a.stopPropagation();if(!("focusout"===a.type&&!a.target.classList.contains("tb_range")||"change"===a.type&&a.target.classList.contains("tb_range"))&&
(a=this.getElementsByClassName("tb_editor_link_input")[0].value.trim())){R=!0;I();var b=f.getSelection(),c=n?n.startContainer.parentNode.closest("a"):null,e=this.querySelector("#tb_editor_link_type").value;if(c&&c===n.endContainer.parentNode.closest("a")){var h=g.createRange();h.selectNodeContents(c);b.removeAllRanges();b.addRange(h)}x("createLink",a);W();if(b.anchorNode&&b.anchorNode.parentNode&&(a=b.anchorNode.parentNode.closest("a")))if(a.removeAttribute("target"),a.removeAttribute("data-zoom-config"),
a.classList.remove("themify_lightbox"),"_blank"===e)a.setAttribute("target",e);else if("lightbox"===e&&(a.classList.add("themify_lightbox"),e=this.querySelector("#tb_editor_lb_w").value,b=this.querySelector("#tb_editor_lb_h").value,c=this.querySelector("#tb_editor_lb_w_unit").value||"px",h=this.querySelector("#tb_editor_lb_h_unit").value||"px",0<e||0<b)){let d="|";e&&(d=e+c+d);b&&(d+=b+h);a.setAttribute("data-zoom-config",d)}H()}},ja=function(a){var b=a.parentNode;const c=b.parentNode.closest("li");
b.classList.add("tb_editor_selected");c&&(c.classList.add("tb_editor_selected"),b=c.getElementsByClassName("tb_editor_action")[0],void 0!==b&&b.parentNode.replaceChild(a.cloneNode(!0),b))},sa=function(){null===T&&(T=m.querySelectorAll("[data-type]"));for(let b=T.length-1;-1<b;--b){var a=T[b];let c=a.getAttribute("data-type");a="LI"===a.tagName?a:a.parentNode;"expand"===c?a.classList.toggle("tb_editor_disable",h.activeModel&&A===h.activeModel.cid):c&&(void 0!==B[c]&&void 0!==B[c].state?B[c].state(a):
a.classList.toggle("tb_editor_selected",ia(c)))}},G=function(a){if(null!==m){var b=f.getSelection(),c=m.classList;if(!1===b.isCollapsed){W();c.contains("tf_hide")&&(y(),c.remove("tf_hide"),setTimeout(function(){c.remove("tf_opacity")},20));b=n.getBoundingClientRect();let d=b.left+(b.width-N)/2,g=b.top-da-10;d+N>=e.w&&(d-=N+Math.ceil(d)+f.pageXOffset-e.w-1);c.toggle("tb_editor_top_viewport",0>=g);0>=g&&(g=b.bottom+10);0>=d&&(d=15);g+=f.pageYOffset;m.style.transform="translate("+d+"px,"+g+"px)";void 0===
a&&sa()}else n=null,c.add("tf_hide","tf_opacity"),c.remove("tb_editor_top_viewport"),X();t&&(t.contains("tb_editor_start_select")||(f.top.document.body.classList.add("tb_editor_start_select"),t.add("tb_editor_start_select")),L&&clearTimeout(L),L=setTimeout(J,500))}},pa=function(){null!==c&&!1===U&&!1===F&&g.activeElement===c&&(Y&&cancelAnimationFrame(Y),ea&&clearTimeout(ea),Y=requestAnimationFrame(function(){ea=setTimeout(function(){null!==c&&!1===U&&!1===F&&g.activeElement===c&&G()},20)}))},J=function(a){t&&
t.contains("tb_editor_start_select")&&(f.top.document.body.classList.remove("tb_editor_start_select"),t.remove("tb_editor_start_select"));L&&clearTimeout(L);L=null},la=function(){const a=g.createElement("button");a.type="button";a.className="tf_close";a.title="Back";a.addEventListener(M.mousedown,function(a){a.stopImmediatePropagation();a.preventDefault();X();m.classList.add("tf_hide","tf_opacity");I();y();G()},{once:!0});return a},ma=function(a){const b=g.createElement("div"),c=g.createElement("div");
b.id="tb_editor_dialog_header";c.id="tb_editor_dialog_content";c.tabIndex="-1";b.appendChild(la());c.appendChild(a);w.appendChild(b);w.appendChild(c)},X=function(){if(m){m.style.display="none";if(w&&w.firstChild)for(;w.firstChild;)w.removeChild(w.lastChild);m.classList.remove("tb_editor_dialog_open","tb_editor_dialog_color","tb_editor_dialog_font","tb_editor_dialog_link","tb_editor_show_link");m.style.display="";y()}},oa=function(a){c&&u()},ha=function(a){fa();p=g.createElement("div");var b=a.getBoundingClientRect();
const d=0!==(c.dataset.orig?c.dataset.orig.trim():c.src.trim()).indexOf(themifyBuilder.upload_url)?themifyBuilder.i18n.image_help:null!==c.closest("[data-hasEditor]")?themifyBuilder.i18n.image_help2:!1,h=["w","s","e","n"];p.id="tb_editor_image";p.style.top=b.top+f.scrollY+"px";p.style.left=b.left+f.scrollX+"px";p.style.width=b.width+"px";p.style.height=b.height+"px";for(b=h.length-1;-1<b;--b){let a=g.createElement("div"),c=g.createElement("div"),d=g.createElement("div");a.className="tb_editor_image_handler tb_editor_"+
h[b];c.className="tb_editor_image_border tb_editor_border_"+h[b];d.className="tb_image_editor_tooltip tb_image_editor_tooltip_"+h[b];p.appendChild(c);p.appendChild(d);p.appendChild(a)}a.hasAttribute("data-w")||a.hasAttribute("data-h")?!1!==d&&p.appendChild(ThemifyConstructor.help(d)):p.className="tb_image_editor_disable";p.addEventListener(E.mousedown,ta,{passive:!0});e.isTouch||p.addEventListener("dblclick",ca,{passive:!0});c.classList.add("tb_selected_img");e.body[0].appendChild(p)},ta=function(a){if(1===
a.which||a.touches){var b=a.target;a.stopPropagation();if((c.hasAttribute("data-w")||c.hasAttribute("data-h"))&&(b.classList.contains("tb_editor_image_handler")||b.classList.contains("tb_editor_image_border"))){this.style.willChange="width,height,left,top";c.parentNode.style.willChange="contents";c.style.willChange="width,height";let k,m,n,p,u,A,w,q=new Image;var d=c.getAttribute("data-maxw");let z=!1;d&&(d=c.closest(d));d||(d=c.closest("[data-hasEditor]"),d||(d=c.parentNode));const x=b.classList[1].replace("tb_editor_border_",
"").replace("tb_editor_",""),I=b.classList.contains("tb_editor_image_handler"),y=this,G=Number.MAX_VALUE;d=c.getBoundingClientRect();const B=parseInt(d.width),F=parseInt(d.height),O=parseFloat(B/F),H=a.touches?a.touches[0].clientX:a.clientX,P=a.touches?a.touches[0].clientY:a.clientY,K=y.getElementsByClassName("tb_image_editor_tooltip"),L=c.dataset.orig?c.dataset.orig.trim():c.src.trim(),M=0===L.indexOf(themifyBuilder.upload_url)&&!c.closest("[data-hasEditor]"),J=!0===M?g.createElement("div"):null,
Q=function(a){a.stopPropagation();n=a.touches?a.touches[0].clientX:a.clientX;p=a.touches?a.touches[0].clientY:a.clientY;!1===z?(z=!0,c.classList.add("tb_resized_img")):k&&cancelAnimationFrame(k);k=requestAnimationFrame(function(){if(null===c)N();else{if(!0===I){var a="n"===x||"s"===x?H+B-n:B+n-H;var b=parseInt(a/O)}else"s"===x||"n"===x?(b="s"===x?F+p-P:P+F-p,a=B):(a="w"===x?B+n-H:H+B-n,b=F);40>a?a=40:a>G&&(a=G);void 0!==b&&40>b&&(b=40);if(u!==a||A!==b)u=a,A=b,h.Utils.resizeImage(c,a,b,q).then(function(a){if(null===
a[0]||null===c)N();else{var b=!1===M?a[0].parentNode:null;null!==b&&"FIGURE"===b.tagName&&(b.style.width&&(b.style.width=a[1]+"px"),b.style.height&&(b.style.height=a[2]+"px"));b=a[0].getBoundingClientRect();y.style.left=b.left+f.scrollX+"px";y.style.top=b.top+f.scrollY+"px";y.style.width=b.width+"px";y.style.height=b.height+"px";K[0].textContent=K[3].textContent=parseInt(a[1])+"px";K[1].textContent=K[2].textContent=parseInt(a[2])+"px";ba()}})}})};a=function(){g.addEventListener(E.mousemove,Q,{passive:!0});
y.classList.remove("tb_image_editor_loading");J&&J.remove()};const N=function(a){a&&a.stopPropagation();k&&cancelAnimationFrame(k);m&&clearTimeout(m);g.removeEventListener(E.mousemove,Q,{passive:!0});g.removeEventListener(E.mouseup,N,{passive:!0,once:!0});f.top.document.body.classList.remove("tb_start_animate","tb_image_editor_resing");(t?t:e.body[0].classList).remove("tb_start_animate","tb_image_editor_resing");e.body[0].style.cursor=f.top.document.body.style.cursor=y.style.willChange=c.style.willChange=
c.parentNode.style.willChange="";c.classList.remove("tb_resized_img");if(!0===z){R=!0;let b=c.closest(".active_module");b||(b=c.closest(".module_column"));aa();const d=function(){requestAnimationFrame(function(){q&&(w=e.hash(L+c.getAttribute("width")+c.getAttribute("height")),h.Utils.cache_images[w]=q,q=null);ba();b&&(c.hasAttribute("data-update")&&(b.innerHTML=b.innerHTML,c=C?b.getElementsByClassName("tb_selected_img")[0]:b.querySelector('[contenteditable="true"]')),h.Mixins.Builder.update(l(b)));
e.trigger("tb_image_resize",c);S();e.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(S)},25)},500);h.Utils.canvas=h.Utils.ctx=null})};if(b)if(a=b.querySelectorAll('img[data-w="'+c.getAttribute("data-w")+'"]'),1<a.length){const e=c.getAttribute("width"),f=c.getAttribute("height"),k=M?g.createElement("div"):null,l=[];k&&(k.className="tf_loader tf_loader_center",b.appendChild(k),b.classList.add("tf_image_editor_working"));for(let b=a.length-1;-1<b;--b)a[b]!==c&&l.push(h.Utils.resizeImage(a[b],
e,f));Promise.allSettled(l).finally(a=>{k&&k.remove();b.classList.remove("tf_image_editor_working");d()})}else d();else d()}z=!1;k=m=u=A=null};t.add("tb_start_animate","tb_image_editor_resing");f.top.document.body.classList.add("tb_start_animate","tb_image_editor_resing");e.body[0].style.cursor=f.top.document.body.style.cursor=getComputedStyle(b).getPropertyValue("cursor");!0===M?(w=e.hash(L+c.getAttribute("width")+c.getAttribute("height")),void 0!==h.Utils.cache_images[w]?(q=h.Utils.cache_images[w],
a()):(J&&(J.className="tf_loader",this.appendChild(J),this.classList.add("tb_image_editor_loading")),q.src=L,q.crossOrigin="anonymous",q.decode().then(a))):a();g.addEventListener(E.mouseup,N,{passive:!0,once:!0})}}},S=function(){p&&requestAnimationFrame(function(){p&&c&&ha(c)})},ba=function(){null!==k&&k.update()},fa=function(){p&&(p.removeEventListener(E.mousedown,ta,{passive:!0}),p.removeEventListener("dblclick",ca,{passive:!0}),p.remove(),p=null)},u=function(a){if(!Z){var b=null;if(a&&(b="blur"===
a.type?a.relatedTarget?a.relatedTarget:z.Lightbox.$lightbox[0].contains(f.top.document.activeElement)?f.top.document.activeElement:g.activeElement:a.target,!C&&b.closest(".tb_toolbar_undo"))){c&&c.removeEventListener("blur",u,{passive:!0});setTimeout(function(){c&&c.addEventListener("blur",u,{passive:!0});n=null;X();c&&c.focus();G()},120);return}if(!a||"blur"===a.type||1===a.which)if(!a||!m||(a.touches||"blur"===a.type||1===a.which)&&m!==b&&!m.contains(b)){let d=c&&h.Instances.Builder[h.builderIndex].el.contains(c)?
c.closest(".module"):h.Instances.Builder[h.builderIndex].el.querySelector(".tb_element_cid_"+A+" .module");X();if(a&&d&&(d===b||d.contains(b)))a&&"blur"!==a.type&&(t.contains("tb_editor_start_select")||(f.top.document.body.classList.add("tb_editor_start_select"),t.add("tb_editor_start_select")),this.addEventListener(E.mouseup,J,{passive:!0,once:!0}));else{g.removeEventListener(E.mousedown,u,{passive:!0});g.removeEventListener("selectionchange",pa,{passive:!0});g.removeEventListener(E.mouseup,J,{passive:!0,
once:!0});f.top.document.removeEventListener(E.mousedown,u,{passive:!0});z.Lightbox.$lightbox.off("themify_opened_lightbox",oa);J();Q&&(h.undoManager.stack=Q,h.undoManager.index=Q.length-1,h.undoManager.updateUndoBtns());if(c){c.removeEventListener("input",H,{passive:!0});c.removeEventListener("change",H,{passive:!0});c.removeEventListener("blur",u,{passive:!0});"IMG"!==c.tagName&&c.setAttribute("contenteditable","false");c.classList.remove("tb_selected_img");if(b=c.closest("form")){b.removeEventListener("submit",
na);b=b.querySelectorAll("[data-required]");for(let a=b.length-1;-1<a;--a)b[a].removeAttribute("data-required"),b[a].setAttribute("required","required")}for(b=c;b&&!b.classList.contains("active_module");)b.getAttribute("data-tmp-animation")&&(b.style["animation-name"]=b.getAttribute("data-tmp-animation"),b.removeAttribute("data-tmp-animation")),b=b.parentNode;b=null}k&&k.params&&k.params.autoplay&&k.params.autoplay.enabled&&(k.el.dataset.stopped=!1,k.autoplay.start(),k.params.thumbs&&k.params.thumbs.swiper.autoplay&&
k.params.thumbs.swiper.autoplay.enabled&&(k.params.thumbs.swiper.el.dataset.stopped=!1,k.params.thumbs.swiper.autoplay.start()));m&&(m.classList.add("tf_hide","tf_opacity"),m.classList.remove("tb_editor_top_viewport","tb_editor_show_link"),m.removeEventListener(M.mousedown,qa));a&&f.getSelection().removeAllRanges();e.off("tfsmartresize",S).off("tbresizeImageEditor",S).off("tbDisableInline",u);fa();t&&t.remove("tb_editor_active","tb_editor_image_active","tb_editor_start_select");f.top.document.body.classList.remove("tb_editor_active",
"tb_editor_image_active","tb_editor_start_select");h.ActionBar.clear();d&&(d=d.closest(".active_module"))&&(d.classList.remove("tb_editor_on","tb_editor_clicked"),d.removeEventListener("dblclick",ca,{passive:!0}),R&&(aa(),c.hasAttribute("data-no-update")||h.Mixins.Builder.update(l(d))));h.ActionBar.hoverCid=K=m=t=O=n=N=da=Y=T=w=P=A=Q=V=k=c=null;console.log("disable")}}}};if(e.is_builder_loaded)ra();else e.on("tb_css_visual_modules_load",ra,!0);e.on("undo",function(a,b,c,e){"inline"!==b&&u()}).on("disableInline",
function(){u()})})(Themify,jQuery,window,document,tb_app,ThemifyBuilderCommon);
