(function(f){var w={themes:{},overlay:null,init:function(){for(var a=document.getElementsByClassName("tb_more_details"),d=a.length-1;-1<d;--d)a[d].addEventListener("click",this.details.bind(this));this.themes=_tbpThemeSettings;_tbpThemeSettings=null;this.overlay=document.getElementsByClassName("theme-overlay")[0];this.activateImportedTheme()},details:function(a){a.preventDefault();a.stopPropagation();a=parseInt(a.currentTarget.getAttribute("data-id"));for(var d=wp.template("tbp-theme-single"),b=null,
l,m,f=this,e=this.themes.length-1;-1<e;--e)if(this.themes[e].theme_id===a){b=this.themes[e];l=this.themes[e+1];m=this.themes[e-1];break}if(null!==b){b.next=void 0!==l;b.prev=void 0!==m;b.active?this.overlay.classList.add("active"):this.overlay.classList.remove("active");this.overlay.innerHTML=d(b);var n=function(c){c.preventDefault();c.stopPropagation();f.overlay.innerHTML="";f.overlay.classList.add("active");p()},g=function(c){c.preventDefault();c.stopPropagation();if(!this.classList.contains("disabled")){c=
this.classList.contains("left")?m.theme_id:l.theme_id;for(var b=document.getElementsByClassName("tb_more_details"),a=b.length-1;-1<a;--a)if(b[a].getAttribute("data-id")==c){p();b[a].click();break}}},q=function(a){a.stopPropagation();a.preventDefault();confirm(_tbp_app.confirmDelete)&&(window.location.href=this.href)},r=function(a){a.stopPropagation();a.preventDefault();document.getElementsByClassName("tbp_themes")[0].querySelector('.tbp_lightbox_edit[data-post-id="'+this.getAttribute("data-post-id")+
'"]').click();n(a)},p=function(){t.removeEventListener("click",g);u.removeEventListener("click",g);v.removeEventListener("click",n,{once:!0});void 0!==h&&h.removeEventListener("click",q);void 0!==k&&k.removeEventListener("click",r)};var v=this.overlay.getElementsByClassName("close")[0];var t=this.overlay.getElementsByClassName("left")[0];var u=this.overlay.getElementsByClassName("right")[0];var h=this.overlay.getElementsByClassName("delete-theme")[0];var k=this.overlay.getElementsByClassName("tbp_lightbox_edit")[0];
void 0!==h&&h.addEventListener("click",q);void 0!==k&&k.addEventListener("click",r);v.addEventListener("click",n,{once:!0});t.addEventListener("click",g);u.addEventListener("click",g)}},activateImportedTheme:function(){f("body").on("themify_plupload_selected",function(a,d,b){null!==b.active&&(confirm(b.msg)?window.location.href=b.active:window.location.reload(!0))})}};f(function(){w.init()})})(jQuery);
