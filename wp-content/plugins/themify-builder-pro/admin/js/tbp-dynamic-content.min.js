var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,d){a!=Array.prototype&&a!=Object.prototype&&(a[g]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var g=0;return $jscomp.iteratorPrototype(function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,g){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,m={next:function(){if(d<a.length){var q=d++;return{value:g(q,a[q]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(a,g,d,m){if(g){d=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var q=a[m];q in d||(d[q]={});d=d[q]}a=a[a.length-1];m=d[a];g=g(m);g!=m&&null!=g&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es6","es3");$jscomp.owns=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var d=[],g;for(g in a)$jscomp.owns(a,g)&&d.push(a[g]);return d}},"es8","es3");
(function(a,g){var d={},m=null,q={},t=tbpDynamic.field_name,r,x=function(c){if(null===m){tbpDynamic.type&&(document.body.classList.add("tbp_template_type_"+tbpDynamic.type),window.top.document.body.classList.add("tbp_template_type_"+tbpDynamic.type));var d=Themify.hash(tbpDynamic.v+Object.keys(tbpDynamic.items));m=function(){if(themifyBuilder.debug)return null;try{var b=sessionStorage.getItem("tbp_dc");if(b&&(b=JSON.parse(b),b.h===d&&b.v))return b.v}catch(k){}return null}();null===m&&a.ajax({type:"POST",
url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_fields",tb_load_nonce:themifyBuilder.tb_load_nonce},error:function(){m=null},success:function(b){m=b;try{sessionStorage.setItem("tbp_dc",JSON.stringify({v:b,h:d}))}catch(k){}c&&c()}})}else c&&c()},D=function(c,d){var b="",k="",p=function(c){if(void 0!==k||void 0!==b)c||(c=""),void 0!==k&&(c=k+c),void 0!==b&&(c+=b);d&&d(c)};if("string"!==typeof c){if(!c||void 0===c.item)return;var e=a.extend(!0,{},c);b=e.text_after;k=
e.text_before;delete e.text_before;delete e.text_after;delete e.o;e=JSON.stringify(e)}else e=c;var h;g.Forms.LayoutPart.id&&document.body.classList.contains("tbp_app_is_edit")&&(h=g.Instances.Builder[g.builderIndex].el.parentNode.id)&&(h=h.split("-")[1]);h||(h="undefined"===typeof tbp_local||void 0===tbp_local.id||tbp_local.isArchive?themifyBuilder.post_ID:tbp_local.id);var l=Themify.hash(e+h);void 0===q[l]?a.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tpb_get_dynamic_content_preview",
tb_load_nonce:themifyBuilder.tb_load_nonce,pid:h,values:e},success:function(b){q[l]=b.error?b.error:""===b.value||"false"===b.value?null:b.value;p(q[l])}}):p(q[l])},E=function(c,d){var b=ThemifyConstructor.values,k=document.createElement("div"),e=Object.values(a.extend(!0,{},m)),f=tbpDynamic.items;k.className="tbp_dynamic_content_options";for(var h=e.length-1;-1<h;--h)if("item"===e[h].id){var h=e[h].options,l;for(l in h){for(var g in h[l].options)void 0!==f[g]&&-1===f[g].type.indexOf(c)&&delete h[l].options[g];
0===Object.keys(h[l].options).length&&delete h[l]}break}void 0===d&&(d={});ThemifyConstructor.values=d;e=ThemifyConstructor.create(e);f=e.querySelectorAll(".tb_lb_option");for(h=f.length-1;-1<h;--h)f[h].classList.remove("tb_lb_option"),f[h].classList.remove("tb_lb_option_child");ThemifyConstructor.values=b;k.appendChild(e);return k},C=function(c,e){var b=c.parentNode.closest(".tb_field"),k=v(b),p=F(b),f=b.getElementsByClassName("tb_input")[0],h={};void 0!==f&&f.parentNode.classList.contains("tb_has_dc")&&
(b=f,f=null);var l=G(b,p);null!==k?void 0!==d[k]&&(f=w(b),void 0!==d[k][f]&&(h=d[k][f])):h=d;if(!0===e)if(void 0!==h[l])c.checked=!0;else return;if(!0===c.checked){b.classList.add("tbp_dc_active");var n=b.getElementsByClassName("tbp_dc_input")[0];void 0===n?(x(function(){var c=document.createElement("div");n=document.createElement("input");c.className="tbp_dc_wrap";n.className="tbp_dc_input xlarge";n.type="text";n.setAttribute("readonly",!0);var d=function(b){b=b.closest(".tbp_dc_wrap");var c=b.querySelector("#item"),
d=c.value,e=c.closest(".tb_field").nextElementSibling.children,k="field_"+d,a=[],f="field_general_"+p;n.value=c.options[c.selectedIndex].text;a.push(c.parentNode);for(var h=e.length-1;-1<h;--h)""!==d&&(e[h].classList.contains(k)||e[h].classList.contains(f))?(e[h].style.display="block",a.push(e[h])):e[h].style.display="";ThemifyConstructor.callbacks();d||(a=null);var g=y(l,a,b),a=null;D(g,function(b){null===b&&(b="image"===p?tbpDynamic.placeholder_image:"{"+g.item+"}");var e=u(c,l);if(null!==e){e.value=
b;var d=null;"wp_editor"===p&&(d=tinymce.get(e.id))&&(d.setContent(String(b)),d.fire("change"));d||(Themify.triggerEvent(e,"change"),"image"!==p&&"SELECT"!==e.nodeName&&Themify.triggerEvent(e,"keyup"))}})};n.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();var c=this.nextElementSibling;null===c&&(c=E(p,h[l]),a(c).on("change.dc_preview",":input",function(b){b.stopPropagation();d(b.target)}),this.parentNode.appendChild(c));b="block"!==c.style.display;for(var e=ThemifyBuilderCommon.Lightbox.$lightbox[0].getElementsByClassName("tbp_dynamic_content_options"),
k=e.length-1;-1<k;--k)e[k].style.display="";if(!0===b){var f=function(b){null===b.target.closest(".tbp_dc_wrap")&&(document.removeEventListener("mousedown",f,{passive:!0}),"visual"===g.mode&&window.top.document.removeEventListener("mousedown",f,{passive:!0}),c.style.display="");"visual"===g.mode&&a(document).triggerHandler("mouseup")};document.addEventListener("mousedown",f,{passive:!0});"visual"===g.mode&&window.top.document.addEventListener("mousedown",f,{passive:!0});d(this);c.style.display="block"}else c.style.display=
""});c.appendChild(n);if(void 0!==h[l]){var e=h[l].item,k=m[0].options,f;for(f in k)if(void 0!==k[f].options[e]){n.value=k[f].options[e];break}if("image"===p&&"styling"===ThemifyConstructor.clicked)for(e=b.closest(".tb_tab").getElementsByClassName("tb_image_options"),f=e.length-1;-1<f;--f)e[f].classList.remove("_tb_hide_binding");else ThemifyConstructor.callbacks()}b.appendChild(c)}),void 0===e&&A(b,l,p)):void 0===e&&(A(b,l,p),void 0!==h[l]&&n.click(),B(!1))}else void 0===e&&(H(b,l,p),b.classList.remove("tbp_dc_active"),
y(l,null,b),B(!0))},w=function(c){return a(c.closest(".tb_repeatable_field")).index()},v=function(c){c=c.parentNode.closest(".tb_row_js_wrapper");return null!==c?c.getAttribute("id"):null},B=function(c){if("visual"===g.mode&&"styling"===ThemifyConstructor.clicked){var e=g.liveStylingInstance.$liveStyledElmt[0].closest(".tb_active_layout_part");null===e&&(e=g.liveStylingInstance.$liveStyledElmt[0]);for(var e=e.getElementsByClassName("tbp_dc_styles"),b=e.length-1;-1<b;--b)e[b].sheet.disabled=c}},G=
function(c,e){var b="image"===e?"tb_uploader_input":null!==c.parentNode.closest(".tb_repeatable_field_content")?"tb_lb_option_child":"tb_lb_option",b=c.getElementsByClassName(b)[0],d;void 0!==b&&(d=b.getAttribute("data-input-id"));d||(d=b.getAttribute("id"));return d.trim()},y=function(c,e,b){var k=null,a=v(b);null!==a&&(k=w(b));if(null===e)if((b=JSON.parse(r.value))||(b={}),null!==k){var f=!1;if(void 0!==b[a]){if(null===c)void 0!==b[a][k]&&(f=!0,delete d[a][k],delete b[a][k]);else if(void 0!==b[a][k]&&
void 0!==b[a][k][c]){if(f=!0,delete b[a][k][c],c=Object.keys(b[a][k]).length,0===c||1===c&&void 0!==b[a][k].o)f=!0,delete d[a][k],delete b[a][k]}else return;0===Object.keys(b[a]).length&&(f=!0,delete d[a],delete b[a])}if(!1===f)return}else if(void 0!==b[c])delete b[c];else return;else{null!==k?(void 0===d[a]&&(d[a]={}),void 0===d[a][k]&&(d[a][k]={}),void 0===d[a][k][c]&&(d[a][k][c]={}),b=void 0!==d[a][k][c].o?d[a][k][c].o:null):(void 0===d[c]&&(d[c]={}),b=void 0!==d[c].o?d[c].o:null);if(Array.isArray(e)){for(var f=
{},h=e.length-1;-1<h;--h)for(var l=e[h].querySelectorAll("input,textarea,select"),n=l.length-1;-1<n;--n){var m=l[n].value;""===m||l[n].parentNode.parentNode.classList.contains("_tb_hide_binding")||(f[l[n].id]=m)}e=g.Utils.clear(f)}null!==k?(d[a][k][c]=e,null!==b&&(d[a][k][c].o=b)):(d[c]=e,null!==b&&(d[c].o=b));b=d}r.value=JSON.stringify(b);return e},u=function(c,a){var b=c.closest(".tb_repeatable_field_content");return b=null!==b?b.querySelector('.tb_lb_option_child[data-input-id="'+a+'"]'):ThemifyBuilderCommon.Lightbox.$lightbox[0].querySelector("#"+
a)},A=function(c,a,b){var e=null,g=null,f=a;"wp_editor"===b?(b=tinymce.get(a),b||(b=u(c,a),b=tinymce.get(b.id)),b&&(e=b.getContent())):(b=u(c,a),null!==b&&(e=b.value));b=v(c);null!==b&&(g=w(c),f=b);null!==e&&""!==e?(void 0===d[f]&&(d[f]={}),null!==g?(void 0===d[f][g]&&(d[f][g]={}),void 0===d[f][g][a]&&(d[f][g][a]={}),d[f][g][a].o=e):d[f].o=e):void 0!==d[f]&&(null!==g?void 0!==d[f][g]&&void 0!==d[f][g][a]&&delete d[f][g][a].o:delete d[f].o);r.value=JSON.stringify(d);return e},H=function(c,a,b){var e=
v(c),g="";if(null!==e){if(void 0!==d[e]){var f=w(c);void 0!==d[e][f]&&void 0!==d[e][f][a]&&void 0!==d[e][f][a].o&&(g=d[e][f][a].o)}}else void 0!==d[a]&&void 0!==d[a].o&&(g=d[a].o);"wp_editor"===b?(b=tinymce.get(a),b||(c=u(c,a),b=tinymce.get(c.id)),b&&(b.setContent(String(g)),b.fire("change"))):(c=u(c,a),null!==c&&(c.value=g,Themify.triggerEvent(c,"change"),"image"!==b&&"SELECT"!==c.nodeName&&Themify.triggerEvent(c,"keyup")))},F=function(a){a=a.getAttribute("data-type");"imageGradient"===a&&(a="image");
return a},z=function(a){for(var c=tbpDynamic.excludes,b=tbpDynamic.d_label,d=!1,g="date text image audio icon textarea number range address wp_editor imageGradient url gallery custom_css".split(" "),f=g.length-1;-1<f;--f)for(var h=a.querySelectorAll('.tb_field[data-type="'+g[f]+'"]'),l=h.length-1;-1<l;--l)if(!h[l].classList.contains("tb_has_dc")&&!h[l].classList.contains("tb_disable_dc")){for(var d=!1,n=c.length-1;-1<n;--n)if(h[l].classList.contains(c[n])){d=!0;break}if(!1===d){h[l].className+=" tb_has_dc";
var d=document.createElement("label"),n=document.createElement("input"),m=document.createElement("div");d.className="tpb_dc_toggle switch-wrapper";n.type="checkbox";n.className="toggle_switch";m.className="switch_label";m.setAttribute("data-on",b);m.setAttribute("data-off",b);n.addEventListener("change",function(a){a.stopPropagation();C(this)},{passive:!0});d.appendChild(n);d.appendChild(m);h[l].insertBefore(d,h[l].firstChild);C(n,!0)}}};a(window).one("load",function(){if("visual"!==g.mode||!0===
Themify.is_builder_loaded)setTimeout(x,1500);else window.top.Themify.body.one("themify_builder_ready",function(a){setTimeout(x,2500)});a(document).on("tb_repeatable_add_new tb_repeatable_duplicate tb_repeatable_delete",function(a){"tb_repeatable_delete"===a.type?y(null,null,a.detail[0]):z(a.detail[0])}).on("tb_editing_module tb_editing_row tb_editing_column tb_editing_subrow",function(c){c=ThemifyConstructor;var e=ThemifyBuilderCommon.Lightbox.$lightbox[0];r=c.hidden.render({type:"hidden","class":"exclude-from-reset-field",
responsive:!1,control:!1,id:t},c);if(void 0!==c.values[t])try{d="string"===typeof c.values[t]?JSON.parse(c.values[t]):a.extend(!0,{},c.values[t]),r.value=JSON.stringify(d)}catch(b){d={}}else d={};e.getElementsByClassName("tb_options_tab_content")[0].appendChild(r);z(e)});Themify.body.on("themify_builder_tabsactive tb_options_expand",function(a,d,b){if(null!==g.activeModel){var c=ThemifyConstructor.clicked;setTimeout(function(){c=ThemifyConstructor.clicked;"animation"!==c&&"visibility"!==c&&("tb_options_expand"===
a.type&&(b=d,d=null),"styling"===c&&null!==d&&-1!==d.indexOf("_h")||z(b))},"setting"===c?0:50)}})})})(jQuery,tb_app);
