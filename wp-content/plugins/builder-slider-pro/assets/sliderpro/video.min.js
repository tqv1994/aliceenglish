'use strict';(function(e){const d="Video."+e.SliderPro.namespace;e.SliderPro.addModule("Video",{initVideo(){this.on("update."+d,this._videoOnUpdate.bind(this)).on("gotoSlideComplete."+d,this._videoOnGotoSlideComplete.bind(this))},_videoOnUpdate(){const b=this;this.$slider.find(".sp-video").not("a, [data-video-init]").each(function(){var c=e(this);b._initVideo(c)});this.$slider.find("a.sp-video").not("[data-video-preinit]").each(function(){var c=e(this);b._preinitVideo(c)})},_initVideo(b){const c=
this;b.attr("data-video-init",!0).videoController();b.on("videoPlay."+d,function(){"stopAutoplay"===c.settings.playVideoAction&&"undefined"!==typeof c.stopAutoplay&&(c.stopAutoplay(),c.settings.autoplay=!1);const d={type:"videoPlay",video:b};c.trigger(d);e.isFunction(c.settings.videoPlay)&&c.settings.videoPlay.call(c,d)}).on("videoPause."+d,function(){"startAutoplay"===c.settings.pauseVideoAction&&"undefined"!==typeof c.startAutoplay&&(c.startAutoplay(),c.settings.autoplay=!0);var d={type:"videoPause",
video:b};c.trigger(d);e.isFunction(c.settings.videoPause)&&c.settings.videoPause.call(c,d)}).on("videoEnded."+d,function(){"startAutoplay"===c.settings.endVideoAction&&"undefined"!==typeof c.startAutoplay?(c.startAutoplay(),c.settings.autoplay=!0):"nextSlide"===c.settings.endVideoAction?c.nextSlide():"replayVideo"===c.settings.endVideoAction&&b.videoController("replay");var d={type:"videoEnd",video:b};c.trigger(d);e.isFunction(c.settings.videoEnd)&&c.settings.videoEnd.call(c,d)})},_preinitVideo(b){const c=
this;b.attr("data-video-preinit",!0).on("click."+d,function(d){if(!c.$slider.hasClass("sp-swiping")){d.preventDefault();var a=b.attr("href"),f;d=b.children("img").attr("width");var m=b.children("img").attr("height");-1!==a.indexOf("youtube")||-1!==a.indexOf("youtu.be")?f="youtube":-1!==a.indexOf("vimeo")&&(f="vimeo");var l=a.match("youtube"===f?/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/:/http:\/\/(www\.)?vimeo.com\/(\d+)/)[2];var h="youtube"===f?"https://www.youtube.com/embed/"+
l+"?enablejsapi=1&wmode=opaque":"https://player.vimeo.com/video/"+l+"?api=1";f=a.split("?")[1];"undefined"!==typeof f&&(f=f.split("&"),e.each(f,function(a,b){-1===b.indexOf(l)&&(h+="&"+b)}));f=e("<iframe></iframe>").attr({src:h,width:d,height:m,"class":b.attr("class"),frameborder:0}).insertBefore(b);c._initVideo(f);f.videoController("play");b.css("display","none")}})},_videoOnGotoSlideComplete(b){var c=this.$slides.find(".sp-slide").eq(b.previousIndex).find(".sp-video[data-video-init]");-1!==b.previousIndex&&
0!==c.length&&("stopVideo"===this.settings.leaveVideoAction?c.videoController("stop"):"pauseVideo"===this.settings.leaveVideoAction?c.videoController("pause"):"removeVideo"===this.settings.leaveVideoAction&&(0!==c.siblings("a.sp-video").length?(c.siblings("a.sp-video").css("display",""),c.videoController("destroy"),c.remove()):c.videoController("stop")));"playVideo"===this.settings.reachVideoAction&&(c=this.$slides.find(".sp-slide").eq(b.index).find(".sp-video[data-video-init]"),b=this.$slides.find(".sp-slide").eq(b.index).find(".sp-video[data-video-preinit]"),
0!==c.length?c.videoController("play"):0!==b.length&&b.trigger("click."+d))},destroyVideo(){this.$slider.find(".sp-video[ data-video-preinit ]").each(function(){e(this).removeAttr("data-video-preinit").off("click."+d)});this.$slider.find(".sp-video[ data-video-init ]").each(function(){e(this).removeAttr("data-video-init").off("Video").videoController("destroy")});this.off("update."+d+" gotoSlideComplete."+d)},videoDefaults:{reachVideoAction:"none",leaveVideoAction:"pauseVideo",playVideoAction:"stopAutoplay",
pauseVideoAction:"none",endVideoAction:"none",videoPlay(){},videoPause(){},videoEnd(){}}});var g=window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,k=function(b,c){this.$video=e(b);this.options=c;this.settings={};this.player=null;this._init()};k.prototype={_init(){this.settings=e.extend({},this.defaults,this.options);var b=this,c=e.VideoController.players,d=this.$video.attr("id"),a;for(a in c)if("undefined"!==typeof c[a]&&c[a].isType(this.$video)){this.player=new c[a](this.$video);break}null!==
this.player&&e.each(["ready","start","play","pause","ended"],function(a,c){var f="video"+c.charAt(0).toUpperCase()+c.slice(1);b.player.on(c,function(){b.trigger({type:f,video:d});e.isFunction(b.settings[f])&&b.settings[f].call(b,{type:f,video:d})})})},play(){!0===g&&!1===this.player.isStarted()||"playing"===this.player.getState()||this.player.play()},stop(){!0===g&&!1===this.player.isStarted()||"stopped"===this.player.getState()||this.player.stop()},pause(){!0===g&&!1===this.player.isStarted()||"paused"===
this.player.getState()||this.player.pause()},replay(){!0===g&&!1===this.player.isStarted()||this.player.replay()},on(b,c){return this.$video.on(b,c)},off(b){return this.$video.off(b)},trigger(b){return this.$video.triggerHandler(b)},destroy(){!0===this.player.isStarted()&&this.stop();this.player.off("ready start play pause ended");this.$video.removeData("videoController")},defaults:{videoReady(){},videoStart(){},videoPlay(){},videoPause(){},videoEnded(){}}};e.VideoController={players:{},addPlayer(b,
c){this.players[b]=c}};e.fn.videoController=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){if("undefined"===typeof e(this).data("videoController")){var d=new k(this,b);e(this).data("videoController",d)}else"undefined"!==typeof b&&(d=e(this).data("videoController"),"function"===typeof d[b]?d[b].apply(d,c):e.error(b+" does not exist in videoController."))})}})(jQuery);
(function(e){const d=function(a){this.$video=a;this.player=null;this.started=this.ready=!1;this.state="";this.events=e({});this._init()};d.prototype={_init(){},play(){},pause(){},stop(){},replay(){},isType(){},isReady(){return this.ready},isStarted(){return this.started},getState(){return this.state},on(a,b){return this.events.on(a,b)},off(a){return this.events.off(a)},trigger(a){return this.events.triggerHandler(a)}};var g=!1,k=[],b=function(a){this.init=!1;if("undefined"!==typeof(window.YT&&window.YT.Player))d.call(this,
a);else if(k.push({video:a,scope:this}),!1===g){g=!0;a=document.createElement("script");a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);window.onYouTubePlayerAPIReady=function(){e.each(k,function(a,b){d.call(b.scope,b.video)})}}};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("YoutubeVideo",b);b.isType=function(a){return a.is("iframe")&&(a=a.attr("src"),-1!==a.indexOf("youtube.com")||-1!==a.indexOf("youtu.be"))?
!0:!1};b.prototype._init=function(){this.init=!0;this._setup()};b.prototype._setup=function(){var a=this;this.player=new YT.Player(this.$video[0],{events:{["onReady"](){a.trigger({type:"ready"});a.ready=!0},["onStateChange"](b){switch(b.data){case YT.PlayerState.PLAYING:!1===a.started&&(a.started=!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"});break;case YT.PlayerState.PAUSED:a.state="paused";a.trigger({type:"pause"});break;case YT.PlayerState.ENDED:a.state="ended",a.trigger({type:"ended"})}}}})};
b.prototype.play=function(){var a=this;if(!0===this.ready)this.player.playVideo();else var b=setInterval(function(){!0===a.ready&&(clearInterval(b),a.player.playVideo())},100)};b.prototype.pause=function(){!0===isIOS?this.stop():this.player.pauseVideo()};b.prototype.stop=function(){this.player.seekTo(1);this.player.stopVideo();this.state="stopped"};b.prototype.replay=function(){this.player.seekTo(1);this.player.playVideo()};b.prototype.on=function(a,b){var c=this;if(!0===this.init)d.prototype.on.call(this,
a,b);else var e=setInterval(function(){!0===c.init&&(clearInterval(e),d.prototype.on.call(c,a,b))},100)};var c=!1,h=[];b=function(a){this.init=!1;if("undefined"!==typeof window.Froogaloop)d.call(this,a);else if(h.push({video:a,scope:this}),!1===c){c=!0;a=document.createElement("script");a.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);var g=setInterval(function(){"undefined"!==typeof window.Froogaloop&&(clearInterval(g),
e.each(h,function(a,b){d.call(b.scope,b.video)}))},100)}};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("VimeoVideo",b);b.isType=function(a){return a.is("iframe")&&-1!==a.attr("src").indexOf("vimeo.com")?!0:!1};b.prototype._init=function(){this.init=!0;this._setup()};b.prototype._setup=function(){var a=this;this.player=$f(this.$video[0]);this.player.addEvent("ready",function(){a.ready=!0;a.trigger({type:"ready"});a.player.addEvent("play",function(){!1===a.started&&(a.started=
!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"})});a.player.addEvent("pause",function(){a.state="paused";a.trigger({type:"pause"})});a.player.addEvent("finish",function(){a.state="ended";a.trigger({type:"ended"})})})};b.prototype.play=function(){var a=this;if(!0===this.ready)this.player.api("play");else var b=setInterval(function(){!0===a.ready&&(clearInterval(b),a.player.api("play"))},100)};b.prototype.pause=function(){this.player.api("pause")};b.prototype.stop=function(){this.player.api("seekTo",
0);this.player.api("pause");this.state="stopped"};b.prototype.replay=function(){this.player.api("seekTo",0);this.player.api("play")};b.prototype.on=function(a,b){var c=this;if(!0===this.init)d.prototype.on.call(this,a,b);else var e=setInterval(function(){!0===c.init&&(clearInterval(e),d.prototype.on.call(c,a,b))},100)};b=function(a){d.call(this,a)};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("HTML5Video",b);b.isType=function(a){return a.is("video")&&!1===a.hasClass("video-js")&&
!1===a.hasClass("sublime")?!0:!1};b.prototype._init=function(){var a=this;this.player=this.$video[0];this.ready=!0;this.player.addEventListener("play",function(){!1===a.started&&(a.started=!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"})});this.player.addEventListener("pause",function(){a.state="paused";a.trigger({type:"pause"})});this.player.addEventListener("ended",function(){a.state="ended";a.trigger({type:"ended"})})};b.prototype.play=function(){this.player.play()};b.prototype.pause=
function(){this.player.pause()};b.prototype.stop=function(){this.player.currentTime=0;this.player.pause();this.state="stopped"};b.prototype.replay=function(){this.player.currentTime=0;this.player.play()};b=function(a){d.call(this,a)};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("VideoJSVideo",b);b.isType=function(a){return"undefined"===typeof a.attr("data-videojs-id")&&!a.hasClass("video-js")||"undefined"===typeof videojs?!1:!0};b.prototype._init=function(){var a=this,b=
this.$video.hasClass("video-js")?this.$video.attr("id"):this.$video.attr("data-videojs-id");this.player=videojs(b);this.player.ready(function(){a.ready=!0;a.trigger({type:"ready"});a.player.on("play",function(){!1===a.started&&(a.started=!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"})});a.player.on("pause",function(){a.state="paused";a.trigger({type:"pause"})});a.player.on("ended",function(){a.state="ended";a.trigger({type:"ended"})})})};b.prototype.play=function(){this.player.play()};
b.prototype.pause=function(){this.player.pause()};b.prototype.stop=function(){this.player.currentTime(0);this.player.pause();this.state="stopped"};b.prototype.replay=function(){this.player.currentTime(0);this.player.play()};b=function(a){d.call(this,a)};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("SublimeVideo",b);b.isType=function(a){return a.hasClass("sublime")&&"undefined"!==typeof sublime?!0:!1};b.prototype._init=function(){const a=this;sublime.ready(function(){a.player=
sublime.player(a.$video.attr("id"));a.ready=!0;a.trigger({type:"ready"});a.player.on("play",function(){!1===a.started&&(a.started=!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"})});a.player.on("pause",function(){a.state="paused";a.trigger({type:"pause"})});a.player.on("stop",function(){a.state="stopped";a.trigger({type:"stop"})});a.player.on("end",function(){a.state="ended";a.trigger({type:"ended"})})})};b.prototype.play=function(){this.player.play()};b.prototype.pause=function(){this.player.pause()};
b.prototype.stop=function(){this.player.stop()};b.prototype.replay=function(){this.player.stop();this.player.play()};b=function(a){d.call(this,a)};b.prototype=new d;b.prototype.constructor=b;e.VideoController.addPlayer("JWPlayerVideo",b);b.isType=function(a){return"undefined"===typeof a.attr("data-jwplayer-id")&&!a.hasClass("jwplayer")&&0===a.find("object[data*='jwplayer']").length||"undefined"===typeof jwplayer?!1:!0};b.prototype._init=function(){var a=this,b;this.$video.hasClass("jwplayer")?b=this.$video.attr("id"):
"undefined"!==typeof this.$video.attr("data-jwplayer-id")?b=this.$video.attr("data-jwplayer-id"):0!==this.$video.find("object[data*='jwplayer']").length&&(b=this.$video.find("object").attr("id"));this.player=jwplayer(b);this.player.onReady(function(){a.ready=!0;a.trigger({type:"ready"});a.player.onPlay(function(){!1===a.started&&(a.started=!0,a.trigger({type:"start"}));a.state="playing";a.trigger({type:"play"})});a.player.onPause(function(){a.state="paused";a.trigger({type:"pause"})});a.player.onComplete(function(){a.state=
"ended";a.trigger({type:"ended"})})})};b.prototype.play=function(){this.player.play(!0)};b.prototype.pause=function(){this.player.pause(!0)};b.prototype.stop=function(){this.player.stop();this.state="stopped"};b.prototype.replay=function(){this.player.seek(0);this.player.play(!0)}})(jQuery);
