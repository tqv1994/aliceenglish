'use strict';(function(g,d){const e="Thumbnails."+d.SliderPro.namespace;var h=function(a,b,c){this.$thumbnail=a;this.$thumbnails=b;this.$thumbnailContainer=null;this.height=this.width=0;this.isImageLoaded=!1;this.setIndex(c);this._init()};h.prototype={_init(){var a=this;this.$thumbnail.attr("data-init",!0);this.$thumbnailContainer=d('<div class="sp-thumbnail-container"></div>').appendTo(this.$thumbnails);0!==this.$thumbnail.parent("a").length?this.$thumbnail.parent("a").appendTo(this.$thumbnailContainer):
this.$thumbnail.appendTo(this.$thumbnailContainer);this.$thumbnailContainer.on("click."+e,function(){a.trigger({type:"thumbnailClick."+e,index:a.index})})},setSize(a,b){this.width=a;this.height=b;this.$thumbnailContainer.css({width:this.width,height:this.height});this.$thumbnail.is("img")&&"undefined"===typeof this.$thumbnail.attr("data-src")&&this.resizeImage()},getSize(){return{width:this.$thumbnailContainer.outerWidth(!0),height:this.$thumbnailContainer.outerHeight(!0)}},getPosition(){return{left:this.$thumbnailContainer.position().left+
parseInt(this.$thumbnailContainer.css("marginLeft"),10),right:this.$thumbnailContainer.position().left+parseInt(this.$thumbnailContainer.css("marginLeft"),10)+this.$thumbnailContainer.outerWidth(),top:this.$thumbnailContainer.position().top+parseInt(this.$thumbnailContainer.css("marginTop"),10),bottom:this.$thumbnailContainer.position().top+parseInt(this.$thumbnailContainer.css("marginTop"),10)+this.$thumbnailContainer.outerHeight()}},setIndex(a){this.index=a;this.$thumbnail.attr("data-index",this.index)},
resizeImage(){var a=this;if(!1===this.isImageLoaded)SliderProUtils.checkImagesComplete(this.$thumbnailContainer,function(){a.isImageLoaded=!0;a.resizeImage()});else{this.$thumbnail=this.$thumbnailContainer.find(".sp-thumbnail");var b=this.$thumbnail.width(),c=this.$thumbnail.height();b/c<=this.width/this.height?this.$thumbnail.css({width:"100%",height:"auto"}):this.$thumbnail.css({width:"auto",height:"100%"});this.$thumbnail.css({marginLeft:.5*(this.$thumbnailContainer.width()-this.$thumbnail.width()),
marginTop:.5*(this.$thumbnailContainer.height()-this.$thumbnail.height())})}},destroy(){this.$thumbnailContainer.off("click."+e);this.$thumbnail.removeAttr("data-init data-index");0!==this.$thumbnail.parent("a").length?this.$thumbnail.parent("a").insertBefore(this.$thumbnailContainer):this.$thumbnail.insertBefore(this.$thumbnailContainer);this.$thumbnailContainer.remove()},on(a,b){return this.$thumbnailContainer.on(a,b)},off(a){return this.$thumbnailContainer.off(a)},trigger(a){return this.$thumbnailContainer.triggerHandler(a)}};
d.SliderPro.addModule("Thumbnails",{$thumbnails:null,$thumbnailsContainer:null,thumbnails:null,selectedThumbnailIndex:0,thumbnailsSize:0,thumbnailsContainerSize:0,thumbnailsPosition:0,thumbnailsOrientation:null,thumbnailsPositionProperty:null,isThumbnailScroller:!1,initThumbnails(){const a=this;this.thumbnails=[];this.on("update."+e,this._thumbnailsOnUpdate.bind(this)).on("sliderResize."+e,this._thumbnailsOnResize.bind(this)).on("gotoSlide."+e,function(b){a._gotoThumbnail(b.index)})},_thumbnailsOnUpdate(){if(0===
this.$slider.find(".sp-thumbnail").length&&0===this.thumbnails.length)this.isThumbnailScroller=!1;else{var a=this;this.isThumbnailScroller=!0;null===this.$thumbnailsContainer&&(this.$thumbnailsContainer=d('<div class="sp-thumbnails-container"></div>').insertAfter(this.$slidesContainer));null===this.$thumbnails&&(this.$thumbnails=this.$slider.find(".sp-thumbnails"),0===this.$thumbnails.length&&(this.$thumbnails=d('<div class="sp-thumbnails"></div>')),this.$thumbnails.appendTo(this.$thumbnailsContainer));
this.$slides.find(".sp-thumbnail").each(function(b){b=d(this);let c=b.parents(".sp-slide").index(),k=a.$thumbnails.find(".sp-thumbnail").length-1;0!==b.parent("a").length&&(b=b.parent("a"));c>k?b.appendTo(a.$thumbnails):b.insertBefore(a.$thumbnails.find(".sp-thumbnail").eq(c))});for(let a=this.thumbnails.length-1;0<=a;a--)0===this.$thumbnails.find('.sp-thumbnail[data-index="'+a+'"]').length&&(this.thumbnails[a].destroy(),this.thumbnails.splice(a,1));this.$thumbnails.find(".sp-thumbnail").each(function(b){let c=
d(this);"undefined"===typeof c.attr("data-init")?a._createThumbnail(c,b):a.thumbnails[b].setIndex(b)});this.$thumbnailsContainer.removeClass("sp-top-thumbnails sp-bottom-thumbnails sp-left-thumbnails sp-right-thumbnails");"top"===this.settings.thumbnailsPosition?(this.$thumbnailsContainer.addClass("sp-top-thumbnails"),this.thumbnailsOrientation="horizontal"):"bottom"===this.settings.thumbnailsPosition?(this.$thumbnailsContainer.addClass("sp-bottom-thumbnails"),this.thumbnailsOrientation="horizontal"):
"left"===this.settings.thumbnailsPosition?(this.$thumbnailsContainer.addClass("sp-left-thumbnails"),this.thumbnailsOrientation="vertical"):"right"===this.settings.thumbnailsPosition&&(this.$thumbnailsContainer.addClass("sp-right-thumbnails"),this.thumbnailsOrientation="vertical");!0===this.settings.thumbnailPointer?this.$thumbnailsContainer.addClass("sp-has-pointer"):this.$thumbnailsContainer.removeClass("sp-has-pointer");this.selectedThumbnailIndex=this.selectedSlideIndex;this.$thumbnails.find(".sp-thumbnail-container").eq(this.selectedThumbnailIndex).addClass("sp-selected-thumbnail");
this.thumbnailsSize=0;d.each(this.thumbnails,function(b,c){c.setSize(a.settings.thumbnailWidth,a.settings.thumbnailHeight);a.thumbnailsSize+="horizontal"===a.thumbnailsOrientation?c.getSize().width:c.getSize().height});"horizontal"===this.thumbnailsOrientation?(this.$thumbnails.css({width:this.thumbnailsSize,height:this.settings.thumbnailHeight}),this.$thumbnailsContainer.css("height",""),this.thumbnailsPositionProperty="left"):(this.$thumbnails.css({width:this.settings.thumbnailWidth,height:this.thumbnailsSize}),
this.$thumbnailsContainer.css("width",""),this.thumbnailsPositionProperty="top");this.trigger({type:"thumbnailsUpdate"});d.isFunction(this.settings.thumbnailsUpdate)&&this.settings.thumbnailsUpdate.call(this,{type:"thumbnailsUpdate"})}},_createThumbnail(a,b){var c=this;a=new h(a,this.$thumbnails,b);a.on("thumbnailClick."+e,function(a){c.gotoSlide(a.index)});this.thumbnails.splice(b,0,a)},_thumbnailsOnResize(){if(!1!==this.isThumbnailScroller){var a=this;"horizontal"===this.thumbnailsOrientation?(this.thumbnailsContainerSize=
Math.min(this.$slidesMask.width(),this.thumbnailsSize),this.$thumbnailsContainer.css("width",this.thumbnailsContainerSize),"fullWindow"===this.settings.forceSize&&(this.$slidesMask.css("height",this.$slidesMask.height()-this.$thumbnailsContainer.outerHeight(!0)),this.slideHeight=this.$slidesMask.height(),d.each(this.slides,function(b,d){d.setSize(a.slideWidth,a.slideHeight)}))):"vertical"===this.thumbnailsOrientation&&(this.$slidesMask.width()+this.$thumbnailsContainer.outerWidth(!0)>this.$slider.parent().width()&&
("fullWidth"===this.settings.forceSize||"fullWindow"===this.settings.forceSize?this.$slider.css("max-width",d(g).width()-this.$thumbnailsContainer.outerWidth(!0)):this.$slider.css("max-width",this.$slider.parent().width()-this.$thumbnailsContainer.outerWidth(!0)),this.$slidesMask.css("width",this.$slider.width()),"horizontal"===this.settings.orientation?(this.visibleOffset=Math.round((this.$slider.width()-this.slideSize)/2),this.visibleSlidesSize=this.$slidesMask.width()):"vertical"===this.settings.orientation&&
(this.slideWidth=this.$slider.width(),d.each(this.slides,function(b,d){d.setSize(a.slideWidth,a.slideHeight)})),this._resetSlidesPosition()),this.thumbnailsContainerSize=Math.min(this.$slidesMask.height(),this.thumbnailsSize),this.$thumbnailsContainer.css("height",this.thumbnailsContainerSize));var b=this.thumbnailsSize<=this.thumbnailsContainerSize||0===this.$thumbnails.find(".sp-selected-thumbnail").length?0:Math.max(-this.thumbnails[this.selectedThumbnailIndex].getPosition()[this.thumbnailsPositionProperty],
this.thumbnailsContainerSize-this.thumbnailsSize);"top"===this.settings.thumbnailsPosition?this.$slider.css({paddingTop:this.$thumbnailsContainer.outerHeight(!0),paddingLeft:"",paddingRight:""}):"bottom"===this.settings.thumbnailsPosition?this.$slider.css({paddingTop:"",paddingLeft:"",paddingRight:""}):"left"===this.settings.thumbnailsPosition?this.$slider.css({paddingTop:"",paddingLeft:this.$thumbnailsContainer.outerWidth(!0),paddingRight:""}):"right"===this.settings.thumbnailsPosition&&this.$slider.css({paddingTop:"",
paddingLeft:"",paddingRight:this.$thumbnailsContainer.outerWidth(!0)});this._moveThumbnailsTo(b,!0)}},_gotoThumbnail(a){if(!1!==this.isThumbnailScroller&&"undefined"!==typeof this.thumbnails[a]){var b=this.selectedThumbnailIndex,c=this.thumbnailsPosition;this.selectedThumbnailIndex=a;this.$thumbnails.find(".sp-selected-thumbnail").removeClass("sp-selected-thumbnail");this.$thumbnails.find(".sp-thumbnail-container").eq(this.selectedThumbnailIndex).addClass("sp-selected-thumbnail");this.selectedThumbnailIndex>=
b?(a=this.thumbnails[this.selectedThumbnailIndex===this.thumbnails.length-1?this.selectedThumbnailIndex:this.selectedThumbnailIndex+1],a="horizontal"===this.thumbnailsOrientation?a.getPosition().right:a.getPosition().bottom,b=-this.thumbnailsPosition+this.thumbnailsContainerSize,a>b&&(c=this.thumbnailsPosition-(a-b))):this.selectedThumbnailIndex<b&&(a=this.thumbnails[0===this.selectedThumbnailIndex?this.selectedThumbnailIndex:this.selectedThumbnailIndex-1],a="horizontal"===this.thumbnailsOrientation?
a.getPosition().left:a.getPosition().top,a<-this.thumbnailsPosition&&(c=-a));this._moveThumbnailsTo(c);this.trigger({type:"gotoThumbnail"});d.isFunction(this.settings.gotoThumbnail)&&this.settings.gotoThumbnail.call(this,{type:"gotoThumbnail"})}},_moveThumbnailsTo(a,b,c){var e=this,f={};a!==this.thumbnailsPosition&&(this.thumbnailsPosition=a,f.transform="translate3d("+("horizontal"===this.thumbnailsOrientation?a:0)+"px, "+("horizontal"===this.thumbnailsOrientation?0:a)+"px, 0)","undefined"!==typeof b&&
!0===b?a="":(this.$thumbnails.addClass("sp-animated"),a="transform 0.7s",this.$thumbnails.on(this.transitionEvent,function(a){a.target===a.currentTarget&&(e.$thumbnails.off(e.transitionEvent),e.$thumbnails.removeClass("sp-animated"),"function"===typeof c&&c(),e.trigger({type:"thumbnailsMoveComplete"}),d.isFunction(e.settings.thumbnailsMoveComplete)&&e.settings.thumbnailsMoveComplete.call(e,{type:"thumbnailsMoveComplete"}))})),f.transition=a,this.$thumbnails.css(f))},_stopThumbnailsMovement(){var a=
{},b=this.$thumbnails.css("transform"),c=-1!==b.indexOf("matrix3d")?"matrix3d":"matrix";b=b.replace(c,"").match(/-?[0-9\.]+/g);var d="matrix3d"===c?parseInt(b[12],10):parseInt(b[4],10);c="matrix3d"===c?parseInt(b[13],10):parseInt(b[5],10);a.transform="translate3d("+d+"px, "+c+"px, 0)";a.transition="";this.$thumbnails.css(a).off(this.transitionEvent);this.thumbnailsPosition="horizontal"===this.thumbnailsOrientation?parseInt(b[4],10):parseInt(b[5],10);this.$thumbnails.removeClass("sp-animated")},destroyThumbnails(){this.off("update."+
e);if(!1!==this.isThumbnailScroller){var a=this;this.off("sliderResize."+e+" gotoSlide."+e);d(g).off("resize."+this.uniqueId+"."+e);this.$thumbnails.find(".sp-thumbnail").each(function(){var b=d(this);b=parseInt(b.attr("data-index"),10);b=a.thumbnails[b];b.off("thumbnailClick."+e);b.destroy()});this.thumbnails.length=0;this.$thumbnails.appendTo(this.$slider);this.$thumbnailsContainer.remove();this.$slider.css({paddingTop:"",paddingLeft:"",paddingRight:""})}},thumbnailsDefaults:{thumbnailWidth:100,
thumbnailHeight:80,thumbnailsPosition:"bottom",thumbnailPointer:!1,thumbnailsUpdate(){},gotoThumbnail(){},thumbnailsMoveComplete(){}}})})(window,jQuery);
