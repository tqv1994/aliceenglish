'use strict';var ThemifyMapsProInit;
(function(r,e){let n=null,g=null;const k=[],p=function(a,c){void 0===k[a]&&(k[a]=c);return c},t=async function(a){if(null===a||""===a.trim())return null;if(void 0!==k[a])return p(a,k[a]);const c=a.match(/^([-+]?[1-8]?\d(\.\d+)?|90(\.0+)?),?\s*([-+]?180(\.0+)?|[-+]?((1[0-7]\d)|([1-9]?\d))(\.\d+)?)(,\d+z)?$/);return Array.isArray(c)?p(a,new google.maps.LatLng(c[1],c[4])):new Promise(function(c,d){n.geocode({address:a},function(e,f){return f===google.maps.GeocoderStatus.OK?c(p(a,e[0].geometry.location)):
d("Couldnt't find the location "+a)})})},h=function(a){const c=google.maps;null===n&&(n=new c.Geocoder);a=e.selectWithParent("module-maps-pro",a);for(let q=a.length-1;-1<q;--q){let g=a[q];var f=g.getElementsByClassName("maps-pro-canvas")[0];if(void 0===f)continue;let b={zoom:null,type:null,address:null,width:null,height:null,style_map:null,scrollwheel:null,polyline:null,geodesic:null,polylinestroke:null,polylinecolor:null,draggable:null,disable_map_ui:null};var d={};for(let a in b)b[a]=g.getAttribute("data-"+
a);d.zoom=parseInt(b.zoom);d.center=new c.LatLng(-34.397,150.644);d.mapTypeId=c.MapTypeId[b.type];d.scrollwheel="enable"===b.scrollwheel;d.draggable="enable"===b.draggable;d.disableDefaultUI="yes"===b.disable_map_ui;const k="hover"!==g.getAttribute("data-trigger")||e.isTouch?"click":"mouseenter";""!==b.style_map&&"undefined"!==typeof map_pro_styles&&(d.styles=map_pro_styles[b.style_map]);"undefined"!==typeof builderMapsPro&&builderMapsPro.styles&&(d.styles=builderMapsPro.styles[b.style_map]);let h=
new c.Map(f,d),l=!1;if("yes"===b.polyline){f="#FF0000";d=1;if(""!==b.polylinecolor&&null!==b.polylinecolor){let a=b.polylinecolor.split("_");f=a[0];1<a.length&&(d=a[1])}l=new c.Polyline({geodesic:"yes"===b.geodesic,strokeColor:f,strokeOpacity:d,strokeWeight:b.polylinestroke||2});l.setMap(h)}const m=g.getElementsByClassName("maps-pro-marker");""===b.address&&m.length&&(b.address=m[0].getAttribute("data-address"));t(b.address).then(function(a){if(a){h.setCenter(a);for(let a=m.length-1;-1<a;--a){let b=
m[a];e.requestIdleCallback(function(){t(b.getAttribute("data-address")).then(function(d){if(d){const f=new c.Marker({map:h,position:d,icon:b.getAttribute("data-image")});d=b.innerHTML.trim();if(""!==d){const b=new c.InfoWindow({content:'<div class="maps-pro-content"'+(!0===e.is_builder_active?' contenteditable="false" data-repeat="markers" data-name="title" data-no-update data-index="'+a+'"':"")+">"+d+"</div>"});c.event.addListener(f,k,function(){b.open(h,f)})}l&&l.getPath().push(f.getPosition())}})},
400)}}})}};ThemifyMapsProInit=function(){g=!0;e.trigger("themify_google_map_pro_loaded")};if(!e.is_builder_active)e.on("tb_tabs_switch",function(a,c,e){r(a).find(".module-maps-pro").each(function(){const a=r(this).find(".map-container").data("gmap_object"),c=a.getCenter();google.maps.event.trigger(a,"resize");a.setCenter(c)})});e.on("builder_load_module_partial",function(a,c,f){(!0!==f||a[0].classList.contains("module-maps-pro"))&&0<e.selectWithParent("module-maps-pro",a).length&&e.requestIdleCallback(function(){null!==
g||window.google&&"object"===typeof window.google.maps?(g=!0,h(a)):(themify_vars.map_key||(themify_vars.map_key=""),e.LoadAsync("//maps.googleapis.com/maps/api/js",function(){if(!0===g)h(a);else if(window.google&&"object"===typeof window.google.maps)h(a);else e.on("themify_google_map_pro_loaded",function(){h(a)},!0)},"v=3.exp&callback=ThemifyMapsProInit&key="+themify_vars.map_key,null,function(){return!!window.google&&"object"===typeof window.google.maps}))},100)})})(jQuery,Themify);
